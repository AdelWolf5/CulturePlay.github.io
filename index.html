<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Culture Play</title>
    <script type="application/manifest+json" id="manifest">
{
  "name": "Culture Play",
  "short_name": "CulturePlay",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#000000",
  "theme_color": "#5D5CDE",
  "icons": [
    {
      "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBmaWxsPSIjNUQ1Q0RFIj48cGF0aCBkPSJNMzMyLjMgNDI2LjRjLTkuMyA5LjMtMjQuNC05LjgtMTk0LjctMTgwLjEtMTcwLjMtMTcwLjMtMTg5LjQtMTg1LjQtMTgwLjEtMTk0LjcgNS40LTUuNCAxMy4xLTcuMiAyNi4xLTcuMiAzNi44IDAgOTguNyAxOCAxNTUuMiA3NC42IDU2LjUgNTYuNSA3NC42IDExOC41IDc0LjYgMTU1LjIgLjEgMTMtMS43IDIwLjctNy4xIDI2LjF6bS00OS4xLTI1NC42Yy0zMC45LTMwLjktMzYuMy0zNi4zLTM0LjctMTU3LjIgMCAwIDEzNS45IDEzNS45IDEzNS45IDEzNS45LTEyMSAxLjYtMTI2LjQtMy44LTE1Ny40LTM0Ljd6bTE1Ny40IDM0LjdjMCAyMi44LTcuNiA0Ni44LTIyLjUgNzEuOEMzOTMuOCAzMTQgMzgyLjMgMzI1LjQgMzQ3IDM2MC43IDMyNS40IDM4Mi4zIDMxNCAzOTMuOCAyNzcuMyA0MTguMWMtMjUgMTQuOS00OS4xIDIyLjUtNzEuOCAyMi41LTE5LjIgMC0zNS4zLTUuMS00Ny42LTE3LjQtOC44LTguOC0xNC42LTIwLjQtMTcuMi0zNC41IDExNS44LTE4LjkgMTk5LjctMTAyLjggMjE4LjYtMjE4LjYgMTQuMSAyLjYgMjUuNiA4LjQgMzQuNSAxNy4yIDEyLjMgMTIuMyAxNy40IDI4LjMgMTcuNCA0Ny42eiI+PC9wYXRoPjwvc3ZnPg==",
      "sizes": "192x192",
      "type": "image/svg+xml"
    },
    {
      "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBmaWxsPSIjNUQ1Q0RFIj48cGF0aCBkPSJNMzMyLjMgNDI2LjRjLTkuMyA5LjMtMjQuNC05LjgtMTk0LjctMTgwLjEtMTcwLjMtMTcwLjMtMTg5LjQtMTg1LjQtMTgwLjEtMTk0LjcgNS40LTUuNCAxMy4xLTcuMiAyNi4xLTcuMiAzNi44IDAgOTguNyAxOCAxNTUuMiA3NC42IDU2LjUgNTYuNSA3NC42IDExOC41IDc0LjYgMTU1LjIgLjEgMTMtMS43IDIwLjctNy4xIDI2LjF6bS00OS4xLTI1NC42Yy0zMC45LTMwLjktMzYuMy0zNi4zLTM0LjctMTU3LjIgMCAwIDEzNS45IDEzNS45IDEzNS45IDEzNS45LTEyMSAxLjYtMTI2LjQtMy44LTE1Ny40LTM0Ljd6bTE1Ny40IDM0LjdjMCAyMi44LTcuNiA0Ni44LTIyLjUgNzEuOEMzOTMuOCAzMTQgMzgyLjMgMzI1LjQgMzQ3IDM2MC43IDMyNS40IDM4Mi4zIDMxNCAzOTMuOCAyNzcuMyA0MTguMWMtMjUgMTQuOS00OS4xIDIyLjUtNzEuOCAyMi41LTE5LjIgMC0zNS4zLTUuMS00Ny42LTE3LjQtOC44LTguOC0xNC42LTIwLjQtMTcuMi0zNC41IDExNS44LTE4LjkgMTk5LjctMTAyLjggMjE4LjYtMjE4LjYgMTQuMSAyLjYgMjUuNiA4LjQgMzQuNSAxNy4yIDEyLjMgMTIuMyAxNy40IDI4LjMgMTcuNCA0Ny42eiI+PC9wYXRoPjwvc3ZnPg==",
      "sizes": "512x512",
      "type": "image/svg+xml"
    }
  ]
}
</script>
<link rel="manifest" href="#manifest">
    <meta name="theme-color" content="#5D5CDE">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBmaWxsPSIjNUQ1Q0RFIj48cGF0aCBkPSJNMzMyLjMgNDI2LjRjLTkuMyA5LjMtMjQuNC05LjgtMTk0LjctMTgwLjEtMTcwLjMtMTcwLjMtMTg5LjQtMTg1LjQtMTgwLjEtMTk0LjcgNS40LTUuNCAxMy4xLTcuMiAyNi4xLTcuMiAzNi44IDAgOTguNyAxOCAxNTUuMiA3NC42IDU2LjUgNTYuNSA3NC42IDExOC41IDc0LjYgMTU1LjIgLjEgMTMtMS43IDIwLjctNy4xIDI2LjF6bS00OS4xLTI1NC42Yy0zMC45LTMwLjktMzYuMy0zNi4zLTM0LjctMTU3LjIgMCAwIDEzNS45IDEzNS45IDEzNS45IDEzNS45LTEyMSAxLjYtMTI2LjQtMy44LTE1Ny40LTM0Ljd6bTE1Ny40IDM0LjdjMCAyMi44LTcuNiA0Ni44LTIyLjUgNzEuOEMzOTMuOCAzMTQgMzgyLjMgMzI1LjQgMzQ3IDM2MC43IDMyNS40IDM4Mi4zIDMxNCAzOTMuOCAyNzcuMyA0MTguMWMtMjUgMTQuOS00OS4xIDIyLjUtNzEuOCAyMi41LTE5LjIgMC0zNS4zLTUuMS00Ny42LTE3LjQtOC44LTguOC0xNC42LTIwLjQtMTcuMi0zNC41IDExNS44LTE4LjkgMTk5LjctMTAyLjggMjE4LjYtMjE4LjYgMTQuMSAyLjYgMjUuNiA4LjQgMzQuNSAxNy4yIDEyLjMgMTIuMyAxNy40IDI4LjMgMTcuNCA0Ny42eiI+PC9wYXRoPjwvc3ZnPg==" type="image/svg+xml">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBmaWxsPSIjNUQ1Q0RFIj48cGF0aCBkPSJNMzMyLjMgNDI2LjRjLTkuMyA5LjMtMjQuNC05LjgtMTk0LjctMTgwLjEtMTcwLjMtMTcwLjMtMTg5LjQtMTg1LjQtMTgwLjEtMTk0LjcgNS40LTUuNCAxMy4xLTcuMiAyNi4xLTcuMiAzNi44IDAgOTguNyAxOCAxNTUuMiA3NC42IDU2LjUgNTYuNSA3NC42IDExOC41IDc0LjYgMTU1LjIgLjEgMTMtMS43IDIwLjctNy4xIDI2LjF6bS00OS4xLTI1NC42Yy0zMC45LTMwLjktMzYuMy0zNi4zLTM0LjctMTU3LjIgMCAwIDEzNS45IDEzNS45IDEzNS45IDEzNS45LTEyMSAxLjYtMTI2LjQtMy44LTE1Ny40LTM0Ljd6bTE1Ny40IDM0LjdjMCAyMi44LTcuNiA0Ni44LTIyLjUgNzEuOEMzOTMuOCAzMTQgMzgyLjMgMzI1LjQgMzQ3IDM2MC43IDMyNS40IDM4Mi4zIDMxNCAzOTMuOCAyNzcuMyA0MTguMWMtMjUgMTQuOS00OS4xIDIyLjUtNzEuOCAyMi41LTE5LjIgMC0zNS4zLTUuMS00Ny42LTE3LjQtOC44LTguOC0xNC42LTIwLjQtMTcuMi0zNC41IDExNS44LTE4LjkgMTk5LjctMTAyLjggMjE4LjYtMjE4LjYgMTQuMSAyLjYgMjUuNiA4LjQgMzQuNSAxNy4yIDEyLjMgMTIuMyAxNy40IDI4LjMgMTcuNCAxNy42eiI+PC9wYXRoPjwvc3ZnPg==">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Progressive Web App - Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    // Registration was successful
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    // Registration failed
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }

        // Add install prompt for PWA
        let deferredPrompt;
        const installBanner = document.createElement('div');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            
            // Create and show the install banner when the app loads
            installBanner.className = 'fixed bottom-20 left-0 right-0 mx-auto max-w-xs bg-primary text-white p-4 rounded-lg shadow-lg flex items-center justify-between z-50';
            installBanner.innerHTML = `
                <div>
                    <p class="font-bold">Installer Culture Play</p>
                    <p class="text-sm">Jouez m√™me hors connexion</p>
                </div>
                <div class="flex gap-2">
                    <button id="install-btn" class="py-1 px-3 bg-white text-primary rounded-md text-sm font-medium">Installer</button>
                    <button id="close-banner" class="py-1 px-2 text-white rounded-md text-sm">&times;</button>
                </div>
            `;
            
            setTimeout(() => {
                document.body.appendChild(installBanner);
                
                document.getElementById('install-btn').addEventListener('click', (e) => {
                    // Hide the banner
                    installBanner.style.display = 'none';
                    // Show the install prompt
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('User accepted the install prompt');
                        } else {
                            console.log('User dismissed the install prompt');
                        }
                        deferredPrompt = null;
                    });
                });
                
                document.getElementById('close-banner').addEventListener('click', (e) => {
                    installBanner.style.display = 'none';
                });
            }, 3000);
        });
        
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#F87171',
                        accent: '#34D399',
                        neutral: {
                            50: '#F9FAFB',
                            100: '#F3F4F6',
                            200: '#E5E7EB',
                            300: '#D1D5DB',
                            400: '#9CA3AF',
                            500: '#6B7280',
                            600: '#4B5563',
                            700: '#374151',
                            800: '#1F2937',
                            900: '#111827',
                        }
                    }
                }
            }
        }

        // Detect dark mode preference
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
    <style>
        /* Custom animations and styles */
        @keyframes pulse-slow {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .animate-pulse-slow {
            animation: pulse-slow 3s infinite;
        }

        .emoji-button {
            transition: transform 0.2s;
        }
        
        .emoji-button:active {
            transform: scale(1.2);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(93, 92, 222, 0.6);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(93, 92, 222, 0.8);
        }

        /* Game specific styles */
        .ttt-cell {
            aspect-ratio: 1;
            border: 2px solid #5D5CDE;
            font-size: 2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .ttt-cell:hover {
            background-color: rgba(93, 92, 222, 0.1);
        }

        .cell-2048 {
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: appear 0.2s;
            transition: all 0.1s;
            aspect-ratio: 1;
        }

        @keyframes appear {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .dark .bg-white {
            background-color: #181818;
        }

        .dark .text-neutral-900 {
            color: #f3f4f6;
        }

        .dark .border-neutral-200 {
            border-color: #374151;
        }

        .dark .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.6), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body class="bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-50 min-h-screen">
    <div class="main-container mx-auto max-w-3xl px-4 pb-20">
        <!-- Navigation Bar -->
        <header class="py-4 mb-6 border-b border-neutral-200 dark:border-neutral-700">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl font-bold text-primary">Culture Play</h1>
                <div class="flex gap-2">
                    <button id="profileBtn" class="p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-800">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                        </svg>
                    </button>
                    <button id="settingsBtn" class="p-2 rounded-full hover:bg-neutral-100 dark:hover:bg-neutral-800">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Main Content Area -->
        <main>
            <!-- Welcome Screen (Default View) -->
            <section id="welcome-screen" class="flex flex-col items-center justify-center py-8">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-2">Bienvenue sur Culture Play</h2>
                    <p class="text-neutral-600 dark:text-neutral-400 mb-4">D√©couvrez des jeux interactifs avec une dimension culturelle</p>
                    <div class="flex flex-wrap justify-center gap-3 mb-2">
                        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full text-sm">Interactions √âmotionnelles</span>
                        <span class="bg-secondary/10 text-secondary px-3 py-1 rounded-full text-sm">Mini-jeux Ludiques</span>
                        <span class="bg-accent/10 text-accent px-3 py-1 rounded-full text-sm">Dimension Culturelle</span>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-xl">
                    <button id="play-vs-player" class="play-option bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700 hover:border-primary dark:hover:border-primary transition-all">
                        <div class="flex items-center mb-3">
                            <div class="p-3 rounded-full bg-primary/10 mr-3">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-primary">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold">Jouer √† deux</h3>
                        </div>
                        <p class="text-neutral-600 dark:text-neutral-400 text-sm">Affrontez un ami sur le m√™me appareil</p>
                    </button>

                    <button id="play-vs-ai" class="play-option bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700 hover:border-primary dark:hover:border-primary transition-all">
                        <div class="flex items-center mb-3">
                            <div class="p-3 rounded-full bg-primary/10 mr-3">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-primary">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold">Contre l'IA</h3>
                        </div>
                        <p class="text-neutral-600 dark:text-neutral-400 text-sm">Affrontez une IA adaptative avec diff√©rents niveaux</p>
                    </button>

                    <button id="select-game" class="play-option bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700 hover:border-primary dark:hover:border-primary transition-all col-span-1 md:col-span-2">
                        <div class="flex items-center mb-3">
                            <div class="p-3 rounded-full bg-primary/10 mr-3">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-primary">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 0 0 .657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 0 1-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 0 0 5.427-.63 48.05 48.05 0 0 0 .582-4.717.532.532 0 0 0-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 0 0 .658-.663 48.422 48.422 0 0 0-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 0 1-.61-.58v0Z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold">Choisir un jeu</h3>
                        </div>
                        <p class="text-neutral-600 dark:text-neutral-400 text-sm">Explorez nos diff√©rents mini-jeux avec une dimension culturelle</p>
                    </button>
                </div>

                <div class="mt-8 text-center">
                    <h3 class="text-lg font-semibold mb-2">R√©compenses populaires</h3>
                    <div class="flex justify-center gap-3">
                        <div class="bg-white dark:bg-neutral-800 p-3 rounded-lg shadow border border-neutral-200 dark:border-neutral-700 text-center">
                            <span class="text-2xl">üèÜ</span>
                            <p class="text-xs mt-1">Champion Culturel</p>
                        </div>
                        <div class="bg-white dark:bg-neutral-800 p-3 rounded-lg shadow border border-neutral-200 dark:border-neutral-700 text-center">
                            <span class="text-2xl">üíç</span>
                            <p class="text-xs mt-1">Alliance Parfaite</p>
                        </div>
                        <div class="bg-white dark:bg-neutral-800 p-3 rounded-lg shadow border border-neutral-200 dark:border-neutral-700 text-center">
                            <span class="text-2xl">üåç</span>
                            <p class="text-xs mt-1">Voyageur Mondial</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Game Selection Screen -->
            <section id="game-selection" class="hidden">
                <div class="mb-6">
                    <button id="back-to-welcome" class="flex items-center text-primary hover:underline mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                        </svg>
                        Retour
                    </button>
                    <h2 class="text-2xl font-bold">Choisissez un jeu</h2>
                    <p class="text-neutral-600 dark:text-neutral-400">Chaque jeu offre une exp√©rience unique avec des √©l√©ments culturels</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="game-card bg-white dark:bg-neutral-800 rounded-xl shadow-lg overflow-hidden border border-neutral-200 dark:border-neutral-700 hover:border-primary dark:hover:border-primary transition-all">
                        <div class="h-32 bg-gradient-to-r from-primary to-primary/70 flex items-center justify-center">
                            <span class="text-5xl">‚ùå‚≠ï</span>
                        </div>
                        <div class="p-4">
                            <h3 class="text-xl font-bold mb-1">Tic Tac Toe Culturel</h3>
                            <p class="text-neutral-600 dark:text-neutral-400 text-sm mb-3">Le morpion classique avec des symboles culturels</p>
                            <button class="start-game w-full py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors" data-game="tictactoe">
                                Jouer
                            </button>
                        </div>
                    </div>

                    <div class="game-card bg-white dark:bg-neutral-800 rounded-xl shadow-lg overflow-hidden border border-neutral-200 dark:border-neutral-700 hover:border-primary dark:hover:border-primary transition-all">
                        <div class="h-32 bg-gradient-to-r from-secondary to-secondary/70 flex items-center justify-center">
                            <span class="text-5xl">2Ô∏è‚É£0Ô∏è‚É£4Ô∏è‚É£8Ô∏è‚É£</span>
                        </div>
                        <div class="p-4">
                            <h3 class="text-xl font-bold mb-1">2048 Mondial</h3>
                            <p class="text-neutral-600 dark:text-neutral-400 text-sm mb-3">Fusionnez des nombres avec des faits culturels</p>
                            <button class="start-game w-full py-2 bg-secondary text-white rounded-lg hover:bg-secondary/90 transition-colors" data-game="2048">
                                Jouer
                            </button>
                        </div>
                    </div>

                    <div class="game-card bg-white dark:bg-neutral-800 rounded-xl shadow-lg overflow-hidden border border-neutral-200 dark:border-neutral-700 hover:border-primary dark:hover:border-primary transition-all">
                        <div class="h-32 bg-gradient-to-r from-accent to-accent/70 flex items-center justify-center">
                            <span class="text-5xl">‚ùìüåç</span>
                        </div>
                        <div class="p-4">
                            <h3 class="text-xl font-bold mb-1">Quiz Culturel</h3>
                            <p class="text-neutral-600 dark:text-neutral-400 text-sm mb-3">Testez vos connaissances des cultures du monde</p>
                            <button class="start-game w-full py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors" data-game="quiz">
                                Jouer
                            </button>
                        </div>
                    </div>

                    <div class="game-card bg-white dark:bg-neutral-800 rounded-xl shadow-lg overflow-hidden border border-neutral-200 dark:border-neutral-700 hover:border-primary dark:hover:border-primary transition-all">
                        <div class="h-32 bg-gradient-to-r from-pink-500 to-pink-400 flex items-center justify-center">
                            <span class="text-5xl">üíçüë©‚Äç‚ù§Ô∏è‚Äçüë®</span>
                        </div>
                        <div class="p-4">
                            <h3 class="text-xl font-bold mb-1">C√©r√©monies de Mariage</h3>
                            <p class="text-neutral-600 dark:text-neutral-400 text-sm mb-3">Explorez les traditions de mariage √† travers le monde</p>
                            <button class="start-game w-full py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-400 transition-colors" data-game="wedding">
                                Jouer
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Screens -->
            <section id="game-wedding" class="game-screen hidden">
                <div class="mb-6">
                    <button class="back-to-games flex items-center text-primary hover:underline mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                        </svg>
                        Retour aux jeux
                    </button>
                    <h2 class="text-2xl font-bold">C√©r√©monies de Mariage</h2>
                    <p class="text-neutral-600 dark:text-neutral-400">Explorez les traditions de mariage √† travers le monde</p>
                </div>

                <div class="game-container bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700 mb-6">
                    <div class="wedding-region-selector mb-5">
                        <h3 class="text-lg font-semibold mb-3">Choisissez une r√©gion</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                            <button class="wedding-region p-3 rounded-lg border-2 border-neutral-200 dark:border-neutral-700 hover:border-pink-500 dark:hover:border-pink-500 transition-colors" data-region="asie">
                                <span class="block text-2xl mb-1">üèÆ</span>
                                <span class="font-medium">Asie</span>
                            </button>
                            <button class="wedding-region p-3 rounded-lg border-2 border-neutral-200 dark:border-neutral-700 hover:border-pink-500 dark:hover:border-pink-500 transition-colors" data-region="afrique">
                                <span class="block text-2xl mb-1">üåç</span>
                                <span class="font-medium">Afrique</span>
                            </button>
                            <button class="wedding-region p-3 rounded-lg border-2 border-neutral-200 dark:border-neutral-700 hover:border-pink-500 dark:hover:border-pink-500 transition-colors" data-region="europe">
                                <span class="block text-2xl mb-1">üè∞</span>
                                <span class="font-medium">Europe</span>
                            </button>
                            <button class="wedding-region p-3 rounded-lg border-2 border-neutral-200 dark:border-neutral-700 hover:border-pink-500 dark:hover:border-pink-500 transition-colors" data-region="moyen-orient">
                                <span class="block text-2xl mb-1">üïå</span>
                                <span class="font-medium">Moyen-Orient</span>
                            </button>
                            <button class="wedding-region p-3 rounded-lg border-2 border-neutral-200 dark:border-neutral-700 hover:border-pink-500 dark:hover:border-pink-500 transition-colors" data-region="ameriques">
                                <span class="block text-2xl mb-1">üåµ</span>
                                <span class="font-medium">Am√©riques</span>
                            </button>
                            <button class="wedding-region p-3 rounded-lg border-2 border-neutral-200 dark:border-neutral-700 hover:border-pink-500 dark:hover:border-pink-500 transition-colors" data-region="oceanie">
                                <span class="block text-2xl mb-1">üèùÔ∏è</span>
                                <span class="font-medium">Oc√©anie</span>
                            </button>
                        </div>
                    </div>

                    <div id="wedding-content" class="wedding-content mb-5">
                        <div class="text-center py-8">
                            <span class="text-5xl animate-pulse-slow">üíç</span>
                            <p class="mt-4 text-neutral-600 dark:text-neutral-400">S√©lectionnez une r√©gion pour d√©couvrir ses traditions de mariage</p>
                        </div>
                    </div>

                    <div class="wedding-actions hidden">
                        <div class="emotional-reactions mb-4">
                            <h3 class="text-sm font-semibold mb-2">R√©actions</h3>
                            <div class="flex justify-center gap-2">
                                <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üëç</button>
                                <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòç</button>
                                <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòÆ</button>
                                <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">‚ù§Ô∏è</button>
                                <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üéâ</button>
                            </div>
                        </div>

                        <div class="flex justify-between mt-4">
                            <button id="wedding-previous" class="px-4 py-2 bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 rounded-lg hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors">
                                Pr√©c√©dent
                            </button>
                            <button id="wedding-next" class="px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-400 transition-colors">
                                Suivant
                            </button>
                        </div>
                    </div>
                </div>

                <div class="game-container bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <h3 class="text-lg font-semibold mb-3">Cr√©ez votre c√©r√©monie</h3>
                    <p class="text-neutral-600 dark:text-neutral-400 mb-4">Combinez des √©l√©ments de diff√©rentes cultures pour cr√©er votre c√©r√©monie de mariage id√©ale.</p>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
                        <div>
                            <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">Tenue de mariage</label>
                            <select id="wedding-attire" class="w-full p-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 text-base">
                                <option value="robe-blanche">Robe blanche (Occident)</option>
                                <option value="kimono">Kimono (Japon)</option>
                                <option value="qipao">Qipao rouge (Chine)</option>
                                <option value="lehenga">Lehenga (Inde)</option>
                                <option value="caftan">Caftan (Maroc)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">Rituels</label>
                            <select id="wedding-ritual" class="w-full p-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 text-base">
                                <option value="echange-alliances">√âchange d'alliances</option>
                                <option value="henna">C√©r√©monie du henn√©</option>
                                <option value="sake">Partage de sak√©</option>
                                <option value="saptapadi">Saptapadi (Sept pas)</option>
                                <option value="jumping-broom">Sauter le balai</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">Musique</label>
                            <select id="wedding-music" class="w-full p-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 text-base">
                                <option value="classique">Musique classique</option>
                                <option value="bhangra">Bhangra (Inde)</option>
                                <option value="mariachi">Mariachi (Mexique)</option>
                                <option value="zaffa">Zaffa (Moyen-Orient)</option>
                                <option value="polynesian">Tambours polyn√©siens</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">Festin</label>
                            <select id="wedding-feast" class="w-full p-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 text-base">
                                <option value="buffet">Buffet international</option>
                                <option value="meze">Mezz√© m√©diterran√©en</option>
                                <option value="dim-sum">Dim sum chinois</option>
                                <option value="asado">Asado sud-am√©ricain</option>
                                <option value="braai">Braai africain</option>
                            </select>
                        </div>
                    </div>

                    <div class="wedding-preview mb-5 p-4 bg-neutral-100 dark:bg-neutral-700 rounded-lg">
                        <h4 class="font-semibold mb-2">Aper√ßu de votre c√©r√©monie</h4>
                        <p id="wedding-custom-preview" class="text-neutral-600 dark:text-neutral-400">
                            S√©lectionnez des √©l√©ments ci-dessus pour cr√©er votre c√©r√©monie de mariage personnalis√©e.
                        </p>
                    </div>

                    <button id="save-wedding" class="w-full py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-400 transition-colors">
                        <span class="mr-1">üíç</span> Finaliser votre c√©r√©monie
                    </button>
                </div>
            </section>
            
            <section id="game-tictactoe" class="game-screen hidden">
                <div class="mb-6">
                    <button class="back-to-games flex items-center text-primary hover:underline mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                        </svg>
                        Retour aux jeux
                    </button>
                    <h2 class="text-2xl font-bold">Tic Tac Toe Culturel</h2>
                    <p class="text-neutral-600 dark:text-neutral-400">Alignez trois symboles identiques pour gagner</p>
                </div>

                <div class="game-container bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <div class="flex justify-between items-center mb-4">
                        <div class="player player-x flex items-center">
                            <span class="text-xl mr-2 font-bold">Joueur X</span>
                            <span class="player-turn px-2 py-1 bg-primary/20 text-primary text-sm rounded-full">√Ä vous</span>
                        </div>
                        <div class="player player-o flex items-center">
                            <span class="player-turn px-2 py-1 bg-primary/20 text-primary text-sm rounded-full hidden">√Ä vous</span>
                            <span class="text-xl ml-2 font-bold">Joueur O</span>
                        </div>
                    </div>

                    <div id="tictactoe-board" class="grid grid-cols-3 gap-2 mb-4">
                        <div class="ttt-cell" data-index="0"></div>
                        <div class="ttt-cell" data-index="1"></div>
                        <div class="ttt-cell" data-index="2"></div>
                        <div class="ttt-cell" data-index="3"></div>
                        <div class="ttt-cell" data-index="4"></div>
                        <div class="ttt-cell" data-index="5"></div>
                        <div class="ttt-cell" data-index="6"></div>
                        <div class="ttt-cell" data-index="7"></div>
                        <div class="ttt-cell" data-index="8"></div>
                    </div>

                    <div class="emotional-reactions mb-4">
                        <h3 class="text-sm font-semibold mb-2">R√©actions</h3>
                        <div class="flex justify-center gap-2">
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üëç</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòÇ</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòÆ</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">‚ù§Ô∏è</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üëè</button>
                        </div>
                    </div>

                    <div class="game-actions flex justify-between">
                        <button id="reset-ttt" class="px-4 py-2 bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 rounded-lg hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors">
                            Recommencer
                        </button>
                        <button id="propose-alliance" class="px-4 py-2 bg-secondary text-white rounded-lg hover:bg-secondary/90 transition-colors">
                            Proposer alliance
                        </button>
                    </div>
                </div>

                <div class="cultural-fact mt-6 bg-white dark:bg-neutral-800 p-4 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <h3 class="text-lg font-semibold mb-2">Le saviez-vous?</h3>
                    <p class="text-neutral-600 dark:text-neutral-400">Le jeu de Tic-tac-toe (ou "Morpion") existe depuis l'√âgypte antique, vers 1300 avant J.-C. Des versions similaires ont √©t√© jou√©es √† travers le monde sous diff√©rents noms.</p>
                </div>
            </section>

            <section id="game-2048" class="game-screen hidden">
                <div class="mb-6">
                    <button class="back-to-games flex items-center text-primary hover:underline mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                        </svg>
                        Retour aux jeux
                    </button>
                    <h2 class="text-2xl font-bold">2048 Mondial</h2>
                    <p class="text-neutral-600 dark:text-neutral-400">Fusionnez les tuiles pour atteindre 2048</p>
                </div>

                <div class="game-container bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <div class="flex justify-between items-center mb-4">
                        <div class="score-container">
                            <div class="text-sm text-neutral-600 dark:text-neutral-400">Score</div>
                            <div id="score-2048" class="text-xl font-bold">0</div>
                        </div>
                        <div class="best-container">
                            <div class="text-sm text-neutral-600 dark:text-neutral-400">Meilleur</div>
                            <div id="best-2048" class="text-xl font-bold">0</div>
                        </div>
                    </div>

                    <div id="game-2048-board" class="grid grid-cols-4 gap-2 bg-neutral-200 dark:bg-neutral-700 p-2 rounded-lg mb-4">
                        <!-- Cells will be added dynamically -->
                    </div>

                    <div class="game-instructions text-sm text-neutral-600 dark:text-neutral-400 mb-4">
                        <p>Utilisez les <b>fl√®ches du clavier</b> ou <b>balayez l'√©cran</b> pour d√©placer les tuiles.</p>
                    </div>

                    <div class="emotional-reactions mb-4">
                        <h3 class="text-sm font-semibold mb-2">R√©actions</h3>
                        <div class="flex justify-center gap-2">
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üëç</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòÇ</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòÆ</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">‚ù§Ô∏è</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üëè</button>
                        </div>
                    </div>

                    <div class="game-actions flex justify-between">
                        <button id="reset-2048" class="px-4 py-2 bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 rounded-lg hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors">
                            Recommencer
                        </button>
                        <button id="share-score" class="px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors">
                            Partager score
                        </button>
                    </div>
                </div>

                <div class="cultural-fact mt-6 bg-white dark:bg-neutral-800 p-4 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <h3 class="text-lg font-semibold mb-2">Fait culturel</h3>
                    <p id="cultural-fact-2048" class="text-neutral-600 dark:text-neutral-400">Chaque tuile 2048 repr√©sente un √©l√©ment culturel unique. Atteignez de nouveaux paliers pour d√©couvrir des faits sur les cultures du monde!</p>
                </div>
            </section>

            <section id="game-quiz" class="game-screen hidden">
                <div class="mb-6">
                    <button class="back-to-games flex items-center text-primary hover:underline mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                        </svg>
                        Retour aux jeux
                    </button>
                    <h2 class="text-2xl font-bold">Quiz Culturel</h2>
                    <p class="text-neutral-600 dark:text-neutral-400">Testez vos connaissances sur les cultures du monde</p>
                </div>

                <div class="game-container bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <div class="quiz-progress mb-4">
                        <div class="flex justify-between text-sm text-neutral-600 dark:text-neutral-400 mb-1">
                            <span>Question <span id="current-question">1</span>/<span id="total-questions">10</span></span>
                            <span>Score: <span id="quiz-score">0</span></span>
                        </div>
                        <div class="bg-neutral-200 dark:bg-neutral-700 rounded-full h-2">
                            <div id="quiz-progress-bar" class="bg-accent h-2 rounded-full" style="width: 10%;"></div>
                        </div>
                    </div>

                    <div id="quiz-question" class="mb-6">
                        <h3 class="text-xl font-bold mb-4">Quelle est la capitale du Japon?</h3>
                        <div class="grid grid-cols-1 gap-3">
                            <button class="quiz-answer text-left p-3 border-2 border-neutral-300 dark:border-neutral-600 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700" data-correct="true">
                                Tokyo
                            </button>
                            <button class="quiz-answer text-left p-3 border-2 border-neutral-300 dark:border-neutral-600 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">
                                Kyoto
                            </button>
                            <button class="quiz-answer text-left p-3 border-2 border-neutral-300 dark:border-neutral-600 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">
                                Osaka
                            </button>
                            <button class="quiz-answer text-left p-3 border-2 border-neutral-300 dark:border-neutral-600 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">
                                Hiroshima
                            </button>
                        </div>
                    </div>

                    <div id="quiz-feedback" class="mb-4 p-4 rounded-lg bg-neutral-100 dark:bg-neutral-700 hidden">
                        <h4 class="font-bold mb-2">Correct!</h4>
                        <p class="text-neutral-600 dark:text-neutral-400">Tokyo est en effet la capitale du Japon depuis 1868.</p>
                    </div>

                    <div class="emotional-reactions mb-4">
                        <h3 class="text-sm font-semibold mb-2">R√©actions</h3>
                        <div class="flex justify-center gap-2">
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üëç</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòÇ</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üòÆ</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">‚ù§Ô∏è</button>
                            <button class="emoji-button text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full">üëè</button>
                        </div>
                    </div>

                    <div class="game-actions flex justify-between">
                        <button id="next-question" class="px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors">
                            Question suivante
                        </button>
                        <button id="challenge-friend" class="px-4 py-2 bg-secondary text-white rounded-lg hover:bg-secondary/90 transition-colors">
                            D√©fier un ami
                        </button>
                    </div>
                </div>
            </section>

            <!-- Settings Screen -->
            <section id="settings-screen" class="hidden">
                <div class="mb-6">
                    <button id="back-from-settings" class="flex items-center text-primary hover:underline mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                        </svg>
                        Retour
                    </button>
                    <h2 class="text-2xl font-bold">Param√®tres</h2>
                    <p class="text-neutral-600 dark:text-neutral-400">Personnalisez votre exp√©rience de jeu</p>
                </div>

                <div class="bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-3">Pr√©f√©rences culturelles</h3>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="settings-item">
                                <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">R√©gion pr√©f√©r√©e</label>
                                <select class="w-full p-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 text-base">
                                    <option>Toutes les r√©gions</option>
                                    <option>Europe</option>
                                    <option>Asie</option>
                                    <option>Afrique</option>
                                    <option>Am√©riques</option>
                                    <option>Oc√©anie</option>
                                </select>
                            </div>

                            <div class="settings-item">
                                <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">Th√®mes culturels pr√©f√©r√©s</label>
                                <div class="flex flex-wrap gap-2">
                                    <span class="px-3 py-1 bg-primary/10 text-primary text-sm rounded-full cursor-pointer">Art</span>
                                    <span class="px-3 py-1 bg-primary/10 text-primary text-sm rounded-full cursor-pointer">Cuisine</span>
                                    <span class="px-3 py-1 bg-primary/10 text-primary text-sm rounded-full cursor-pointer">Musique</span>
                                    <span class="px-3 py-1 bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400 text-sm rounded-full cursor-pointer">Architecture</span>
                                    <span class="px-3 py-1 bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-400 text-sm rounded-full cursor-pointer">Histoire</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-3">Options de jeu</h3>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="settings-item">
                                <label class="flex items-center text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">
                                    <span>Difficult√© de l'IA</span>
                                </label>
                                <div class="flex items-center">
                                    <span class="text-xs mr-2">Facile</span>
                                    <input type="range" min="1" max="3" value="2" class="w-full">
                                    <span class="text-xs ml-2">Difficile</span>
                                </div>
                            </div>

                            <div class="settings-item">
                                <label class="flex items-center text-sm font-medium text-neutral-700 dark:text-neutral-300">
                                    <input type="checkbox" class="mr-2 h-4 w-4 accent-primary" checked>
                                    <span>Activer les r√©actions √©motionnelles</span>
                                </label>
                            </div>

                            <div class="settings-item">
                                <label class="flex items-center text-sm font-medium text-neutral-700 dark:text-neutral-300">
                                    <input type="checkbox" class="mr-2 h-4 w-4 accent-primary" checked>
                                    <span>Afficher les faits culturels</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold mb-3">Personnalisation</h3>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="settings-item">
                                <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">Pseudo</label>
                                <input type="text" placeholder="Votre pseudonyme" class="w-full p-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 text-base">
                            </div>

                            <div class="settings-item">
                                <label class="block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1">Avatar</label>
                                <div class="flex gap-2">
                                    <span class="text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full cursor-pointer">üë§</span>
                                    <span class="text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full cursor-pointer">ü¶ä</span>
                                    <span class="text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full cursor-pointer">üê±</span>
                                    <span class="text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full cursor-pointer">üêº</span>
                                    <span class="text-2xl bg-neutral-100 dark:bg-neutral-700 p-2 rounded-full cursor-pointer">ü¶Å</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 bg-white dark:bg-neutral-800 p-4 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <h3 class="text-lg font-semibold mb-2">Assistance</h3>
                    <p class="text-neutral-600 dark:text-neutral-400 mb-3">Des questions sur le jeu ou les r√®gles?</p>
                    <button id="get-help" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
                        Obtenir de l'aide
                    </button>
                </div>
            </section>

            <!-- Profile Screen -->
            <section id="profile-screen" class="hidden">
                <div class="mb-6">
                    <button id="back-from-profile" class="flex items-center text-primary hover:underline mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                        </svg>
                        Retour
                    </button>
                    <h2 class="text-2xl font-bold">Profil du joueur</h2>
                    <p class="text-neutral-600 dark:text-neutral-400">Votre parcours culturel et vos r√©compenses</p>
                </div>

                <div class="profile-container bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700 mb-6">
                    <div class="flex items-center mb-6">
                        <div class="profile-avatar text-5xl bg-primary/10 p-4 rounded-full mr-4">üë§</div>
                        <div>
                            <h3 class="text-xl font-bold">Voyageur Culturel</h3>
                            <p class="text-neutral-600 dark:text-neutral-400">Membre depuis 2023</p>
                            <div class="mt-1 flex items-center">
                                <span class="text-sm bg-primary/10 text-primary px-2 py-1 rounded-full">Niveau 3</span>
                                <span class="text-xs text-neutral-500 dark:text-neutral-400 ml-2">500 points</span>
                            </div>
                        </div>
                    </div>

                    <div class="profile-stats grid grid-cols-3 gap-2 mb-6">
                        <div class="text-center p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg">
                            <div class="text-xl font-bold">12</div>
                            <div class="text-xs text-neutral-600 dark:text-neutral-400">Parties jou√©es</div>
                        </div>
                        <div class="text-center p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg">
                            <div class="text-xl font-bold">8</div>
                            <div class="text-xs text-neutral-600 dark:text-neutral-400">Victoires</div>
                        </div>
                        <div class="text-center p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg">
                            <div class="text-xl font-bold">3</div>
                            <div class="text-xs text-neutral-600 dark:text-neutral-400">Alliances</div>
                        </div>
                    </div>

                    <div class="profile-achievements">
                        <h3 class="text-lg font-semibold mb-3">R√©compenses obtenues</h3>
                        <div class="grid grid-cols-3 sm:grid-cols-4 gap-3">
                            <div class="achievement p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg text-center">
                                <div class="text-3xl mb-1">üèÜ</div>
                                <div class="text-xs">Champion du Tic Tac Toe</div>
                            </div>
                            <div class="achievement p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg text-center">
                                <div class="text-3xl mb-1">üåç</div>
                                <div class="text-xs">Voyageur Asiatique</div>
                            </div>
                            <div class="achievement p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg text-center">
                                <div class="text-3xl mb-1">üíç</div>
                                <div class="text-xs">Alliance Parfaite</div>
                            </div>
                            <div class="achievement p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg text-center opacity-40">
                                <div class="text-3xl mb-1">üß†</div>
                                <div class="text-xs">Ma√Ætre du Quiz</div>
                            </div>
                            <div class="achievement p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg text-center opacity-40">
                                <div class="text-3xl mb-1">üéÆ</div>
                                <div class="text-xs">1000 Points</div>
                            </div>
                            <div class="achievement p-3 bg-neutral-100 dark:bg-neutral-700 rounded-lg text-center opacity-40">
                                <div class="text-3xl mb-1">üåü</div>
                                <div class="text-xs">Collectionneur</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="alliance-section bg-white dark:bg-neutral-800 p-6 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700">
                    <h3 class="text-lg font-semibold mb-3">Vos alliances</h3>
                    <div class="mb-4">
                        <div class="alliance-item p-3 border-b border-neutral-200 dark:border-neutral-700 last:border-0">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="text-2xl mr-3">ü¶ä</div>
                                    <div>
                                        <div class="font-medium">Alliance avec FoxPlayer</div>
                                        <div class="text-xs text-neutral-600 dark:text-neutral-400">Form√©e il y a 2 jours</div>
                                    </div>
                                </div>
                                <span class="text-xs bg-secondary/10 text-secondary px-2 py-1 rounded-full">Niveau 2</span>
                            </div>
                        </div>
                        <div class="alliance-item p-3 border-b border-neutral-200 dark:border-neutral-700 last:border-0">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="text-2xl mr-3">üêº</div>
                                    <div>
                                        <div class="font-medium">Alliance avec PandaGamer</div>
                                        <div class="text-xs text-neutral-600 dark:text-neutral-400">Form√©e il y a 1 semaine</div>
                                    </div>
                                </div>
                                <span class="text-xs bg-accent/10 text-accent px-2 py-1 rounded-full">Niveau 3</span>
                            </div>
                        </div>
                    </div>
                    <button id="search-alliance" class="w-full py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
                        Rechercher de nouvelles alliances
                    </button>
                </div>
            </section>

            <!-- Alliance Modal -->
            <div id="alliance-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6 m-4 max-w-sm w-full">
                    <div class="text-center mb-4">
                        <span class="text-5xl animate-pulse-slow">üíç</span>
                        <h3 class="text-xl font-bold mt-2">Proposition d'Alliance</h3>
                        <p class="text-neutral-600 dark:text-neutral-400 mt-1">Voulez-vous former une alliance avec ce joueur?</p>
                    </div>
                    <div class="flex flex-col gap-3 mt-4">
                        <button id="accept-alliance" class="py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">
                            Accepter
                        </button>
                        <button id="decline-alliance" class="py-2 bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 rounded-lg hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors">
                            D√©cliner
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-neutral-800 border-t border-neutral-200 dark:border-neutral-700 shadow-lg">
            <div class="max-w-3xl mx-auto flex items-center justify-around">
                <button id="nav-home" class="nav-item flex flex-col items-center p-3 text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                    </svg>
                    <span class="text-xs mt-1">Accueil</span>
                </button>
                <button id="nav-games" class="nav-item flex flex-col items-center p-3 text-neutral-500 dark:text-neutral-400">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 0 1-.657.643 48.39 48.39 0 0 1-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 0 1-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 0 0-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 0 1-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 0 0 .657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 0 1-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 0 0 5.427-.63 48.05 48.05 0 0 0 .582-4.717.532.532 0 0 0-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 0 0 .658-.663 48.422 48.422 0 0 0-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 0 1-.61-.58v0Z" />
                    </svg>
                    <span class="text-xs mt-1">Jeux</span>
                </button>
                <button id="nav-alliances" class="nav-item flex flex-col items-center p-3 text-neutral-500 dark:text-neutral-400">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                    </svg>
                    <span class="text-xs mt-1">Alliances</span>
                </button>
                <button id="nav-profile" class="nav-item flex flex-col items-center p-3 text-neutral-500 dark:text-neutral-400">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                    </svg>
                    <span class="text-xs mt-1">Profil</span>
                </button>
            </div>
        </nav>
    </div>

    <script>
        // Navigation and UI Control
        document.addEventListener('DOMContentLoaded', function() {
            // Wedding Ceremonies Game Logic
            function initWeddingCeremonies() {
                const weddingContent = document.getElementById('wedding-content');
                const weddingRegions = document.querySelectorAll('.wedding-region');
                const weddingActions = document.querySelector('.wedding-actions');
                const weddingPrevious = document.getElementById('wedding-previous');
                const weddingNext = document.getElementById('wedding-next');
                const customPreview = document.getElementById('wedding-custom-preview');
                const saveWeddingBtn = document.getElementById('save-wedding');
                
                // Wedding traditions by region
                const weddingTraditions = {
                    'asie': [
                        {
                            title: "Mariage japonais traditionnel",
                            description: "Le mariage traditionnel japonais (Shinto) implique plusieurs rituels symboliques. Les mari√©s portent des kimonos traditionnels et partagent du sak√© (san-san-kudo) trois fois pour symboliser leur union.",
                            emoji: "üèÆ",
                            image: "kimono-wedding.jpg",
                            details: "La c√©r√©monie a g√©n√©ralement lieu dans un sanctuaire shinto. La mari√©e porte une coiffe blanche appel√©e 'tsunokakushi' qui symbolise la dissimulation de sa 'jalousie'. Apr√®s la c√©r√©monie, les mari√©s changent souvent plusieurs fois de tenue pendant la r√©ception."
                        },
                        {
                            title: "Mariage chinois",
                            description: "Dans la tradition chinoise, la couleur du mariage est le rouge, symbole de bonheur et de prosp√©rit√©. La mari√©e porte g√©n√©ralement une robe rouge appel√©e qipao et re√ßoit des bijoux en or de sa belle-famille.",
                            emoji: "üßß",
                            image: "chinese-wedding.jpg",
                            details: "Avant le mariage, les familles √©changent des cadeaux, et le futur mari√© doit offrir une 'caisse de fian√ßailles' avec de l'argent pour symboliser sa capacit√© √† subvenir aux besoins de sa future √©pouse. La c√©r√©monie du th√© est un moment important o√π les mari√©s servent le th√© aux membres a√Æn√©s de la famille en signe de respect."
                        },
                        {
                            title: "Mariage indien",
                            description: "Les mariages indiens sont connus pour leur richesse, leurs couleurs et leurs festivit√©s qui durent plusieurs jours. La mari√©e porte un sari rouge ou un lehenga ornement√© et ses mains sont d√©cor√©es de henn√© (mehndi).",
                            emoji: "ü™î",
                            image: "indian-wedding.jpg",
                            details: "Les c√©r√©monies pr√©liminaires incluent la Haldi (application de p√¢te de curcuma), le Mehndi (application de henn√©) et le Sangeet (f√™te musicale). Pendant la c√©r√©monie principale, les mari√©s font sept pas ensemble (Saptapadi) autour du feu sacr√© en pronon√ßant des v≈ìux pour chaque pas."
                        }
                    ],
                    'afrique': [
                        {
                            title: "Mariage √©gyptien",
                            description: "Les mariages √©gyptiens sont de grandes c√©l√©brations o√π la famille et les amis se r√©unissent. La mari√©e porte souvent une robe blanche occidentale pour la c√©r√©monie et une robe traditionnelle (galabiya) pour la f√™te.",
                            emoji: "üê´",
                            image: "egyptian-wedding.jpg",
                            details: "Avant le mariage, le mari√© offre des cadeaux (Shabka) √† la mari√©e. La soir√©e du henn√© (Laylat el-Henna) est une tradition o√π les femmes d√©corent les mains et les pieds de la mari√©e. Les c√©l√©brations comprennent de la musique traditionnelle, la zaffa (procession de mariage) et la danse du ventre."
                        },
                        {
                            title: "Mariage marocain",
                            description: "Les mariages marocains durent g√©n√©ralement plusieurs jours. La mari√©e porte des caftans color√©s et change de tenue plusieurs fois. Le henn√© est appliqu√© sur ses mains et pieds lors d'une c√©r√©monie sp√©ciale.",
                            emoji: "üïå",
                            image: "moroccan-wedding.jpg",
                            details: "La c√©r√©monie commence par le Hammam (bain rituel) pour la mari√©e. Pendant la c√©l√©bration, les mari√©s sont port√©s sur une Amariya (plateforme) et pr√©sent√©s aux invit√©s. La nourriture, la musique et la danse sont essentielles, avec des plats comme le couscous et des p√¢tisseries traditionnelles."
                        },
                        {
                            title: "Mariage zoulou",
                            description: "Les mariages zoulous en Afrique du Sud m√©langent traditions ancestrales et modernit√©. Les mari√©s portent des v√™tements traditionnels color√©s, avec des perles et des peaux d'animaux, symbolisant leurs racines culturelles.",
                            emoji: "ü•Å",
                            image: "zulu-wedding.jpg",
                            details: "La c√©r√©monie implique le paiement d'une dot (Lobola) √† la famille de la mari√©e, g√©n√©ralement en b√©tail ou en argent. Les danses traditionnelles, les chants et le partage de la bi√®re de sorgho font partie int√©grante des c√©l√©brations. Les a√Æn√©s jouent un r√¥le important en b√©nissant l'union."
                        }
                    ],
                    'europe': [
                        {
                            title: "Mariage grec orthodoxe",
                            description: "Le mariage grec orthodoxe est riche en symbolisme religieux. Les mari√©s portent des couronnes reli√©es par un ruban (stephana) symbolisant leur union et leur royaut√© dans leur nouveau foyer.",
                            emoji: "üèõÔ∏è",
                            image: "greek-wedding.jpg",
                            details: "Les t√©moins √©changent trois fois les couronnes sur les t√™tes des mari√©s pendant la c√©r√©monie. Les mari√©s boivent du vin dans une coupe commune et font le tour de l'autel trois fois, symbolisant leur premier pas ensemble en tant que couple. Apr√®s la c√©r√©monie, les invit√©s lancent du riz et des drag√©es (koufeta) aux mari√©s pour leur souhaiter fertilit√© et douceur dans la vie."
                        },
                        {
                            title: "Mariage italien",
                            description: "Les mariages italiens sont centr√©s sur la famille, la nourriture et les traditions. Avant le mariage, la 'Serenata' est une tradition o√π le mari√© chante sous la fen√™tre de sa future femme la veille du mariage.",
                            emoji: "üçù",
                            image: "italian-wedding.jpg",
                            details: "La mari√©e porte traditionnellement une robe blanche et un voile, qui selon la superstition doit √™tre long pour un mariage heureux. Apr√®s la c√©r√©monie, les invit√©s lancent du riz ou des p√©tales sur les mari√©s. Le banquet est extravagant avec plusieurs plats et dure souvent jusqu'au petit matin. Les invit√©s offrent des bomboniere (petits cadeaux) contenant des drag√©es."
                        },
                        {
                            title: "Mariage scandinave",
                            description: "Les mariages scandinaves combinent simplicit√© et √©l√©gance. En Su√®de, Norv√®ge et Danemark, les traditions incluent des couronnes de fleurs pour la mari√©e et des d√©corations naturelles refl√©tant le lien avec la nature.",
                            emoji: "‚ùÑÔ∏è",
                            image: "scandinavian-wedding.jpg",
                            details: "Une tradition unique est que les mari√©s peuvent embrasser leur partenaire chaque fois que l'un des invit√©s quitte la table. Si la mari√©e quitte la pi√®ce, toutes les femmes peuvent embrasser le mari√©, et vice versa. L'alcool, notamment l'aquavit, est servi tout au long de la r√©ception, accompagn√© de nombreux toasts et de chansons."
                        }
                    ],
                    'moyen-orient': [
                        {
                            title: "Mariage libanais",
                            description: "Les mariages libanais sont connus pour √™tre grandioses et festifs. La zaffe, une procession anim√©e avec de la musique et des danseurs, accompagne l'entr√©e des mari√©s.",
                            emoji: "ü•ô",
                            image: "lebanese-wedding.jpg",
                            details: "Les c√©l√©brations commencent par les fian√ßailles officielles (Khutbeh) o√π les bagues sont √©chang√©es. La musique et la danse, en particulier le dabke (danse traditionnelle en ligne), sont au c≈ìur de la f√™te. Le mezz√©, une vari√©t√© de petits plats, est servi en abondance, et les festivit√©s durent souvent jusqu'au petit matin."
                        },
                        {
                            title: "Mariage turc",
                            description: "Les mariages turcs impliquent de nombreuses festivit√©s avant et pendant le jour J. Le Kina Gecesi (soir√©e au henn√©) est une c√©r√©monie o√π la mari√©e est d√©cor√©e de henn√© par les femmes de sa famille.",
                            emoji: "üßø",
                            image: "turkish-wedding.jpg",
                            details: "Avant le mariage, le mari√© et ses amis attachent un drapeau turc dans la maison de la mari√©e. Le jour du mariage, un ruban rouge est attach√© autour de la taille de la mari√©e par son p√®re, symbolisant sa virginit√© et sa fertilit√©. Les danses traditionnelles, la nourriture et les cadeaux en or pour la mari√©e sont des √©l√©ments essentiels."
                        },
                        {
                            title: "Mariage persan",
                            description: "Les mariages iraniens ou persans sont riches en symbolisme et en traditions mill√©naires. La c√©r√©monie Sofreh Aghd pr√©sente une table √©labor√©e avec des objets symboliques repr√©sentant l'amour, la fertilit√© et la prosp√©rit√©.",
                            emoji: "üïäÔ∏è",
                            image: "persian-wedding.jpg",
                            details: "Sur la table c√©r√©monielle se trouvent des miroirs pour la lumi√®re et les r√©flexions, des bougies pour l'√©nergie, des ≈ìufs et des noix pour la fertilit√©, et du miel pour la douceur dans la vie de couple. Pendant la c√©r√©monie, des femmes mari√©es tiennent un ch√¢le au-dessus des mari√©s pendant que d'autres frottent des c√¥nes de sucre ensemble pour 'adoucir' leur vie."
                        }
                    ],
                    'ameriques': [
                        {
                            title: "Mariage maya",
                            description: "Les mariages mayas au Guatemala et au Mexique sont profond√©ment li√©s aux traditions ancestrales. Les mari√©s portent des v√™tements tiss√©s √† la main avec des motifs symboliques propres √† leur communaut√©.",
                            emoji: "üåµ",
                            image: "mayan-wedding.jpg",
                            details: "La c√©r√©monie a souvent lieu pr√®s d'un feu sacr√©, symbole de la cr√©ation. Les a√Æn√©s ou chamans (sacerdotes mayas) b√©nissent l'union en utilisant le copal (encens) et en faisant des offrandes aux divinit√©s. Les mari√©s √©changent des promesses dans leur langue maternelle et participent √† un rituel o√π ils partagent une boisson de ma√Øs."
                        },
                        {
                            title: "Mariage mexicain",
                            description: "Les mariages mexicains sont color√©s et festifs. Le lazo, un cordon ornemental, est plac√© autour des mari√©s en forme de huit pour symboliser leur union √©ternelle.",
                            emoji: "üåÆ",
                            image: "mexican-wedding.jpg",
                            details: "Les parrains de mariage (padrinos) jouent un r√¥le important en offrant des √©l√©ments symboliques pour la c√©r√©monie. La f√™te comprend des mariachis, de la tequila, et souvent 'la Vibora de la Mar', une danse o√π les invit√©s forment un pont sous lequel passent les mari√©s. Les arras matrimoniales, 13 pi√®ces d'or, sont offertes par le mari√© √† la mari√©e pour repr√©senter sa capacit√© √† subvenir √† ses besoins."
                        },
                        {
                            title: "Mariage cajun",
                            description: "Les mariages cajuns en Louisiane sont connus pour leur ambiance festive et leur musique entra√Ænante. La danse du 'Money Dance' permet aux invit√©s d'√©pingler de l'argent sur les v√™tements des mari√©s pour danser avec eux.",
                            emoji: "üéª",
                            image: "cajun-wedding.jpg",
                            details: "La nourriture est un √©l√©ment central avec des plats comme le jambalaya, le gumbo et l'√©crevisse. L'alcool coule √† flots, en particulier le whisky et la bi√®re. La musique cajun avec violon, accord√©on et washboard (frottoir) cr√©e une atmosph√®re joyeuse. La f√™te peut durer jusqu'au petit matin avec le 'fais do-do', une grande danse collective."
                        }
                    ],
                    'oceanie': [
                        {
                            title: "Mariage maori",
                            description: "Les mariages maoris en Nouvelle-Z√©lande int√®grent des √©l√©ments culturels puissants comme le hongi (salutation par le toucher des nez) et le haka (danse c√©r√©monielle).",
                            emoji: "üèùÔ∏è",
                            image: "maori-wedding.jpg",
                            details: "La c√©r√©monie commence souvent par un powhiri (accueil traditionnel) et peut inclure l'√©change de taonga (tr√©sors) comme des pendentifs en jade. Les tatouages traditionnels (tƒÅ moko) et les v√™tements maoris peuvent √™tre port√©s. Les chants et discours (whaik≈çrero) sont importants pour honorer les anc√™tres des deux familles."
                        },
                        {
                            title: "Mariage samoan",
                            description: "Les mariages samoans sont des occasions familiales importantes avec des c√©r√©monies √©labor√©es. Les familles √©changent des nattes fines (ie toga) et d'autres biens pendant la c√©r√©monie.",
                            emoji: "üå∫",
                            image: "samoan-wedding.jpg",
                            details: "La mari√©e porte un peignoir de mariage traditionnel (puletasi) et une couronne de fleurs (pale). Les chefs de famille (matai) prononcent des discours importants pendant la c√©r√©monie. La danse traditionnelle (siva) et la nourriture, comme le cochon r√¥ti en terre (umu), sont essentielles aux c√©l√©brations."
                        },
                        {
                            title: "Mariage aborig√®ne",
                            description: "Les mariages aborig√®nes australiens honorent le lien spirituel avec la terre (Pays). Les c√©r√©monies peuvent inclure de la peinture corporelle, des rituels de purification et des chants ancestraux.",
                            emoji: "ü™É",
                            image: "aboriginal-wedding.jpg",
                            details: "Le smoking ceremony (rituel de fum√©e) est utilis√© pour purifier les mari√©s et √©loigner les mauvais esprits. Les mariages peuvent √™tre c√©l√©br√©s en pr√©sence des Anciens qui donnent des b√©n√©dictions sp√©ciales. Les c√©l√©brations impliquent souvent des danses traditionnelles racontant l'histoire de la cr√©ation (Temps du R√™ve) et la connexion au territoire ancestral."
                        }
                    ]
                };
                
                // Interactive elements for creating custom weddings
                const attireSelect = document.getElementById('wedding-attire');
                const ritualSelect = document.getElementById('wedding-ritual');
                const musicSelect = document.getElementById('wedding-music');
                const feastSelect = document.getElementById('wedding-feast');
                
                let currentRegion = '';
                let currentTraditionIndex = 0;
                
                // Description maps for custom wedding elements
                const attireMap = {
                    'robe-blanche': "Vous avez choisi la robe blanche occidentale, symbole de puret√© et de nouvelle vie.",
                    'kimono': "Vous avez choisi le kimono japonais traditionnel, √©l√©gant et orn√© de motifs symboliques.",
                    'qipao': "Vous avez choisi le qipao rouge chinois, symbole de chance et de prosp√©rit√©.",
                    'lehenga': "Vous avez choisi le lehenga indien, richement d√©cor√© et color√©.",
                    'caftan': "Vous avez choisi le caftan marocain, √©l√©gant et traditionnel."
                };
                
                const ritualMap = {
                    'echange-alliances': "L'√©change d'alliances symbolise l'engagement √©ternel entre les √©poux.",
                    'henna': "La c√©r√©monie du henn√© apporte beaut√© et chance √† la mari√©e avant son grand jour.",
                    'sake': "Le partage de sak√© (san-san-kudo) unit les √©poux en buvant trois fois dans trois coupes.",
                    'saptapadi': "Les Sept Pas (Saptapadi) repr√©sentent les v≈ìux que les √©poux se font pour leur vie commune.",
                    'jumping-broom': "Sauter par-dessus le balai est une tradition afro-am√©ricaine symbolisant le passage √† une nouvelle vie."
                };
                
                const musicMap = {
                    'classique': "La musique classique apporte √©l√©gance et solennit√© √† votre c√©r√©monie.",
                    'bhangra': "Le bhangra indien cr√©e une atmosph√®re festive et √©nergique.",
                    'mariachi': "Les mariachis mexicains apportent joie et tradition √† votre c√©l√©bration.",
                    'zaffa': "Le zaffa moyen-oriental avec ses tambours et danseurs accompagne l'entr√©e triomphale des mari√©s.",
                    'polynesian': "Les tambours polyn√©siens cr√©ent une ambiance exotique et rythm√©e."
                };
                
                const feastMap = {
                    'buffet': "Un buffet international pour satisfaire tous les go√ªts et toutes les cultures.",
                    'meze': "Le mezz√© m√©diterran√©en offre une vari√©t√© de petits plats √† partager, symbolisant l'abondance.",
                    'dim-sum': "Les dim sum chinois repr√©sentent la diversit√© et la richesse de la culture culinaire.",
                    'asado': "L'asado sud-am√©ricain avec ses viandes grill√©es cr√©e une atmosph√®re conviviale.",
                    'braai': "Le braai africain est un barbecue traditionnel rassembleur autour du feu."
                };
                
                // Add event listeners to region buttons
                weddingRegions.forEach(regionBtn => {
                    regionBtn.addEventListener('click', function() {
                        const region = this.getAttribute('data-region');
                        currentRegion = region;
                        currentTraditionIndex = 0;
                        
                        // Highlight selected region
                        weddingRegions.forEach(btn => {
                            btn.classList.remove('border-pink-500', 'dark:border-pink-500');
                            btn.classList.add('border-neutral-200', 'dark:border-neutral-700');
                        });
                        this.classList.remove('border-neutral-200', 'dark:border-neutral-700');
                        this.classList.add('border-pink-500', 'dark:border-pink-500');
                        
                        // Show wedding tradition content
                        displayWeddingTradition();
                        
                        // Show navigation buttons
                        weddingActions.classList.remove('hidden');
                    });
                });
                
                // Display wedding tradition
                function displayWeddingTradition() {
                    if (!currentRegion || !weddingTraditions[currentRegion]) {
                        return;
                    }
                    
                    const traditions = weddingTraditions[currentRegion];
                    if (currentTraditionIndex >= traditions.length) {
                        currentTraditionIndex = 0;
                    }
                    
                    const tradition = traditions[currentTraditionIndex];
                    
                    weddingContent.innerHTML = `
                        <div class="text-center mb-4">
                            <span class="text-4xl">${tradition.emoji}</span>
                            <h3 class="text-xl font-bold mt-2">${tradition.title}</h3>
                        </div>
                        <p class="text-neutral-600 dark:text-neutral-400 mb-4">${tradition.description}</p>
                        <div class="bg-neutral-100 dark:bg-neutral-700 p-4 rounded-lg mb-4">
                            <h4 class="font-semibold mb-2">En d√©tail</h4>
                            <p class="text-neutral-600 dark:text-neutral-400">${tradition.details}</p>
                        </div>
                    `;
                    
                    // Update navigation button states
                    weddingPrevious.disabled = traditions.length <= 1;
                    weddingNext.disabled = traditions.length <= 1;
                    
                    if (traditions.length <= 1) {
                        weddingPrevious.classList.add('opacity-50', 'cursor-not-allowed');
                        weddingNext.classList.add('opacity-50', 'cursor-not-allowed');
                    } else {
                        weddingPrevious.classList.remove('opacity-50', 'cursor-not-allowed');
                        weddingNext.classList.remove('opacity-50', 'cursor-not-allowed');
                    }
                }
                
                // Navigation event listeners
                weddingPrevious.addEventListener('click', function() {
                    if (!currentRegion || !weddingTraditions[currentRegion]) {
                        return;
                    }
                    
                    const traditions = weddingTraditions[currentRegion];
                    currentTraditionIndex = (currentTraditionIndex - 1 + traditions.length) % traditions.length;
                    displayWeddingTradition();
                });
                
                weddingNext.addEventListener('click', function() {
                    if (!currentRegion || !weddingTraditions[currentRegion]) {
                        return;
                    }
                    
                    const traditions = weddingTraditions[currentRegion];
                    currentTraditionIndex = (currentTraditionIndex + 1) % traditions.length;
                    displayWeddingTradition();
                });
                
                // Custom wedding preview
                function updateCustomWeddingPreview() {
                    const attire = attireSelect.value;
                    const ritual = ritualSelect.value;
                    const music = musicSelect.value;
                    const feast = feastSelect.value;
                    
                    const previewText = `
                        ${attireMap[attire]} ${ritualMap[ritual]} Pour la musique, ${musicMap[music].toLowerCase()} Pour le festin, ${feastMap[feast].toLowerCase()}
                    `;
                    
                    customPreview.textContent = previewText;
                }
                
                // Add event listeners to selects
                attireSelect.addEventListener('change', updateCustomWeddingPreview);
                ritualSelect.addEventListener('change', updateCustomWeddingPreview);
                musicSelect.addEventListener('change', updateCustomWeddingPreview);
                feastSelect.addEventListener('change', updateCustomWeddingPreview);
                
                // Initialize custom wedding preview
                updateCustomWeddingPreview();
                
                // Save wedding button
                saveWeddingBtn.addEventListener('click', function() {
                    alert('F√©licitations ! Votre c√©r√©monie de mariage personnalis√©e a √©t√© enregistr√©e. Vous recevrez bient√¥t un badge de "Planificateur de C√©r√©monie" !');
                });
            }
            
            // Updated game initialization
            document.querySelectorAll('.start-game').forEach(button => {
                button.addEventListener('click', () => {
                    const gameType = button.getAttribute('data-game');
                    const gameScreen = document.getElementById(`game-${gameType}`);
                    if (gameScreen) {
                        showScreen(gameScreen);
                        // Initialize the game
                        if (gameType === 'tictactoe') {
                            initTicTacToe();
                        } else if (gameType === '2048') {
                            init2048Game();
                        } else if (gameType === 'quiz') {
                            initQuiz();
                        } else if (gameType === 'wedding') {
                            initWeddingCeremonies();
                        }
                    }
                });
            });
            // Get all main screen sections
            const welcomeScreen = document.getElementById('welcome-screen');
            const gameSelectionScreen = document.getElementById('game-selection');
            const gameScreens = document.querySelectorAll('.game-screen');
            const settingsScreen = document.getElementById('settings-screen');
            const profileScreen = document.getElementById('profile-screen');
            const allianceModal = document.getElementById('alliance-modal');
            
            // Navigation functions
            function showScreen(screen) {
                // Hide all screens
                welcomeScreen.classList.add('hidden');
                gameSelectionScreen.classList.add('hidden');
                gameScreens.forEach(gameScreen => gameScreen.classList.add('hidden'));
                settingsScreen.classList.add('hidden');
                profileScreen.classList.add('hidden');
                
                // Show the selected screen
                screen.classList.remove('hidden');
                
                // Update bottom navigation
                updateNavigation(screen.id);
            }
            
            function updateNavigation(screenId) {
                const navItems = document.querySelectorAll('.nav-item');
                navItems.forEach(item => {
                    item.classList.remove('text-primary');
                    item.classList.add('text-neutral-500', 'dark:text-neutral-400');
                });
                
                // Highlight active nav item
                if (screenId === 'welcome-screen') {
                    document.getElementById('nav-home').classList.remove('text-neutral-500', 'dark:text-neutral-400');
                    document.getElementById('nav-home').classList.add('text-primary');
                } else if (screenId === 'game-selection' || screenId.startsWith('game-')) {
                    document.getElementById('nav-games').classList.remove('text-neutral-500', 'dark:text-neutral-400');
                    document.getElementById('nav-games').classList.add('text-primary');
                } else if (screenId === 'profile-screen') {
                    document.getElementById('nav-profile').classList.remove('text-neutral-500', 'dark:text-neutral-400');
                    document.getElementById('nav-profile').classList.add('text-primary');
                }
            }
            
            // Button event listeners
            document.getElementById('select-game').addEventListener('click', () => {
                showScreen(gameSelectionScreen);
            });
            
            document.getElementById('back-to-welcome').addEventListener('click', () => {
                showScreen(welcomeScreen);
            });
            
            document.querySelectorAll('.back-to-games').forEach(button => {
                button.addEventListener('click', () => {
                    showScreen(gameSelectionScreen);
                });
            });
            
            document.getElementById('settingsBtn').addEventListener('click', () => {
                showScreen(settingsScreen);
            });
            
            document.getElementById('back-from-settings').addEventListener('click', () => {
                showScreen(welcomeScreen);
            });
            
            document.getElementById('profileBtn').addEventListener('click', () => {
                showScreen(profileScreen);
            });
            
            document.getElementById('back-from-profile').addEventListener('click', () => {
                showScreen(welcomeScreen);
            });
            
            // Start game buttons
            document.querySelectorAll('.start-game').forEach(button => {
                button.addEventListener('click', () => {
                    const gameType = button.getAttribute('data-game');
                    const gameScreen = document.getElementById(`game-${gameType}`);
                    if (gameScreen) {
                        showScreen(gameScreen);
                        // Initialize the game
                        if (gameType === 'tictactoe') {
                            initTicTacToe();
                        } else if (gameType === '2048') {
                            init2048Game();
                        } else if (gameType === 'quiz') {
                            initQuiz();
                        }
                    }
                });
            });
            
            // Bottom navigation
            document.getElementById('nav-home').addEventListener('click', () => {
                showScreen(welcomeScreen);
            });
            
            document.getElementById('nav-games').addEventListener('click', () => {
                showScreen(gameSelectionScreen);
            });
            
            document.getElementById('nav-profile').addEventListener('click', () => {
                showScreen(profileScreen);
            });
            
            document.getElementById('nav-alliances').addEventListener('click', () => {
                // For now, just show the alliance modal as a demo
                allianceModal.classList.remove('hidden');
            });
            
            // Alliance modal
            document.getElementById('propose-alliance').addEventListener('click', () => {
                allianceModal.classList.remove('hidden');
            });
            
            document.getElementById('accept-alliance').addEventListener('click', () => {
                allianceModal.classList.add('hidden');
                // Show some confirmation or success message
                alert('Alliance form√©e avec succ√®s!');
            });
            
            document.getElementById('decline-alliance').addEventListener('click', () => {
                allianceModal.classList.add('hidden');
            });
            
            // Emotional reactions
            document.querySelectorAll('.emoji-button').forEach(button => {
                button.addEventListener('click', function() {
                    // Visual feedback for emoji click
                    this.classList.add('scale-125');
                    setTimeout(() => {
                        this.classList.remove('scale-125');
                    }, 200);
                });
            });
            
            // Global variable to track AI mode
            let playingAgainstAI = false;
            
            // Play vs AI or Player buttons
            document.getElementById('play-vs-player').addEventListener('click', () => {
                playingAgainstAI = false;
                showScreen(gameSelectionScreen);
            });
            
            document.getElementById('play-vs-ai').addEventListener('click', () => {
                playingAgainstAI = true;
                showScreen(gameSelectionScreen);
            });
            
            // === Tic Tac Toe Game Logic ===
            function initTicTacToe() {
                const cells = document.querySelectorAll('.ttt-cell');
                const resetButton = document.getElementById('reset-ttt');
                const playerOText = document.querySelector('.player-o .text-xl');
                const playerXTurn = document.querySelector('.player-x .player-turn');
                const playerOTurn = document.querySelector('.player-o .player-turn');

                // √âtats possibles du jeu
                const GAME_STATE = {
                    WAITING: 'waiting',
                    X_TURN: 'x_turn',          // Tour du joueur X (humain)
                    O_TURN: 'o_turn',          // Tour du joueur O (humain ou IA)
                    X_WON: 'x_won',            // Le joueur X a gagn√©
                    O_WON: 'o_won',            // Le joueur O a gagn√©
                    DRAW: 'draw'               // Match nul
                };
                
                // Initialiser les variables du jeu
                let gameState = GAME_STATE.WAITING;
                let gameBoard = ['', '', '', '', '', '', '', '', ''];
                let aiDifficulty = 2; // 1: Facile, 2: Moyen, 3: Difficile
                let aiMoveInProgress = false; // Flag pour emp√™cher les actions pendant que l'IA joue
                
                // Mise √† jour du texte si en mode IA
                if (playingAgainstAI) {
                    playerOText.textContent = "IA (O)";
                    
                    // R√©cup√©rer la difficult√© depuis les param√®tres s'ils existent
                    const difficultyInput = document.querySelector('input[type="range"]');
                    if (difficultyInput) {
                        aiDifficulty = parseInt(difficultyInput.value);
                    }
                } else {
                    playerOText.textContent = "Joueur O";
                }
                
                // Initialiser le plateau de jeu
                function initBoard() {
                    // Vider le plateau
                    gameBoard = ['', '', '', '', '', '', '', '', ''];
                    
                    // R√©initialiser l'affichage
                    cells.forEach(cell => {
                        cell.textContent = '';
                        cell.classList.remove('bg-primary/20', 'text-primary', 'text-secondary');
                    });
                    
                    // Retirer les anciens √©couteurs et en ajouter des nouveaux
                    cells.forEach(cell => {
                        // Retirer tous les √©couteurs existants (solution propre pour √©viter les doublons)
                        const newCell = cell.cloneNode(true);
                        cell.parentNode.replaceChild(newCell, cell);
                        
                        // Ajouter un nouvel √©couteur
                        newCell.addEventListener('click', handleCellClick);
                    });
                    
                    // Commencer le jeu avec le tour du joueur X
                    gameState = GAME_STATE.X_TURN;
                    updateTurnIndicators();
                }
                
                // Initialiser le jeu
                initBoard();
                
                // Reset button
                resetButton.addEventListener('click', () => {
                    initBoard();
                });
                
                // Fonction pour g√©rer les clics sur les cellules
                function handleCellClick(event) {
                    // R√©cup√©rer l'index de la cellule cliqu√©e
                    const cellIndex = event.target.getAttribute('data-index');
                    
                    // V√©rifier si le clic est valide
                    if (
                        (gameState !== GAME_STATE.X_TURN && gameState !== GAME_STATE.O_TURN) || // Pas un tour de jeu actif
                        gameBoard[cellIndex] !== '' || // Case d√©j√† occup√©e
                        aiMoveInProgress || // L'IA est en train de jouer
                        (playingAgainstAI && gameState === GAME_STATE.O_TURN) // C'est le tour de l'IA en mode IA
                    ) {
                        return; // Ignorer le clic
                    }
                    
                    // D√©terminer le symbole √† placer selon le tour actuel
                    const currentSymbol = gameState === GAME_STATE.X_TURN ? 'X' : 'O';
                    const colorClass = currentSymbol === 'X' ? 'text-primary' : 'text-secondary';
                    
                    // Jouer le coup du joueur
                    makeMove(cellIndex, currentSymbol, colorClass);
                    
                    // V√©rifier si le joueur a gagn√©
                    if (checkWin(currentSymbol)) {
                        gameState = currentSymbol === 'X' ? GAME_STATE.X_WON : GAME_STATE.O_WON;
                        highlightWinner(currentSymbol);
                        setTimeout(() => {
                            alert(currentSymbol === 'X' ? "Joueur X a gagn√©!" : "Joueur O a gagn√©!");
                        }, 100);
                        return;
                    }
                    
                    // V√©rifier si c'est un match nul
                    if (checkDraw()) {
                        gameState = GAME_STATE.DRAW;
                        setTimeout(() => {
                            alert("Match nul!");
                        }, 100);
                        return;
                    }
                    
                    // Passer au tour suivant
                    if (playingAgainstAI && currentSymbol === 'X') {
                        // Mode IA: passer au tour de l'IA apr√®s le joueur X
                        gameState = GAME_STATE.O_TURN;
                        updateTurnIndicators();
                        
                        // Emp√™cher les interactions pendant que l'IA joue
                        aiMoveInProgress = true;
                        
                        // Simuler la "r√©flexion" de l'IA
                        setTimeout(() => {
                            // Jouer le coup de l'IA
                            const aiMove = findBestMove();
                            
                            if (aiMove !== null) {
                                makeMove(aiMove, 'O', 'text-secondary');
                                
                                // V√©rifier si l'IA a gagn√©
                                if (checkWin('O')) {
                                    gameState = GAME_STATE.O_WON;
                                    highlightWinner('O');
                                    setTimeout(() => {
                                        alert("L'IA a gagn√©!");
                                    }, 100);
                                } else if (checkDraw()) {
                                    gameState = GAME_STATE.DRAW;
                                    setTimeout(() => {
                                        alert("Match nul!");
                                    }, 100);
                                } else {
                                    // Revenir au tour du joueur
                                    gameState = GAME_STATE.X_TURN;
                                    updateTurnIndicators();
                                }
                            }
                            
                            // R√©activer les interactions
                            aiMoveInProgress = false;
                        }, 500);
                    } else {
                        // Mode 2 joueurs ou apr√®s le tour de l'IA: alterner entre X et O
                        gameState = gameState === GAME_STATE.X_TURN ? GAME_STATE.O_TURN : GAME_STATE.X_TURN;
                        updateTurnIndicators();
                    }
                }
                
                // Fonction pour jouer un coup (utilis√©e par le joueur et l'IA)
                function makeMove(cellIndex, symbol, colorClass) {
                    // Mettre √† jour le tableau de jeu
                    gameBoard[cellIndex] = symbol;
                    
                    // Mettre √† jour l'interface
                    const cell = document.querySelector(`.ttt-cell[data-index="${cellIndex}"]`);
                    cell.textContent = symbol;
                    cell.classList.add(colorClass);
                }
                
                function updateTurnIndicators() {
                    // Selon l'√©tat du jeu, afficher les indicateurs de tour appropri√©s
                    if (gameState === GAME_STATE.X_TURN) {
                        playerXTurn.classList.remove('hidden');
                        playerOTurn.classList.add('hidden');
                    } else if (gameState === GAME_STATE.O_TURN) {
                        playerXTurn.classList.add('hidden');
                        playerOTurn.classList.remove('hidden');
                    } else {
                        // Si le jeu est termin√©, masquer les deux indicateurs
                        playerXTurn.classList.add('hidden');
                        playerOTurn.classList.add('hidden');
                    }
                }
                
                function checkWin(player) {
                    const winPatterns = [
                        [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
                        [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
                        [0, 4, 8], [2, 4, 6]             // diagonals
                    ];
                    
                    return winPatterns.some(pattern => {
                        return pattern.every(index => {
                            return gameBoard[index] === player;
                        });
                    });
                }
                
                function checkDraw() {
                    return !gameBoard.includes('');
                }
                
                function highlightWinner(player) {
                    const winPatterns = [
                        [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
                        [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
                        [0, 4, 8], [2, 4, 6]             // diagonals
                    ];
                    
                    for (const pattern of winPatterns) {
                        if (
                            gameBoard[pattern[0]] === player &&
                            gameBoard[pattern[1]] === player &&
                            gameBoard[pattern[2]] === player
                        ) {
                            // S√©lectionner les cellules par leurs attributs data-index
                            pattern.forEach(index => {
                                const cell = document.querySelector(`.ttt-cell[data-index="${index}"]`);
                                if (cell) {
                                    cell.classList.add('bg-primary/20');
                                }
                            });
                            break;
                        }
                    }
                }
                
                // Algorithme pour d√©terminer le meilleur coup de l'IA
                function findBestMove() {
                    // V√©rifier s'il y a des cases vides disponibles
                    const emptyCells = [];
                    for (let i = 0; i < 9; i++) {
                        if (gameBoard[i] === '') {
                            emptyCells.push(i);
                        }
                    }
                    
                    // S'il n'y a pas de cases vides, retourner null
                    if (emptyCells.length === 0) {
                        return null;
                    }
                    
                    // Si la difficult√© est facile, jouer al√©atoirement 70% du temps
                    if (aiDifficulty === 1 && Math.random() < 0.7) {
                        return findRandomMove();
                    }
                    
                    // Si la difficult√© est moyenne, jouer al√©atoirement 30% du temps
                    if (aiDifficulty === 2 && Math.random() < 0.3) {
                        return findRandomMove();
                    }
                    
                    // Utiliser l'algorithme minimax pour les coups optimaux
                    let bestScore = -Infinity;
                    let bestMove = emptyCells[0]; // Valeur par d√©faut pour √©viter les null
                    
                    for (let i = 0; i < 9; i++) {
                        // Seulement tester les cases vides
                        if (gameBoard[i] === '') {
                            // Essayer ce coup
                            gameBoard[i] = 'O';
                            
                            // √âvaluer ce coup avec minimax
                            let score = minimax(gameBoard, 0, false);
                            
                            // Annuler le coup
                            gameBoard[i] = '';
                            
                            // Mettre √† jour le meilleur coup si n√©cessaire
                            if (score > bestScore) {
                                bestScore = score;
                                bestMove = i;
                            }
                        }
                    }
                    
                    return bestMove;
                }
                
                function findRandomMove() {
                    const availableMoves = [];
                    for (let i = 0; i < 9; i++) {
                        if (gameBoard[i] === '') {
                            availableMoves.push(i);
                        }
                    }
                    
                    if (availableMoves.length === 0) return null;
                    return availableMoves[Math.floor(Math.random() * availableMoves.length)];
                }
                
                function minimax(board, depth, isMaximizing) {
                    // V√©rifier si le jeu est termin√©
                    const scores = {
                        'X': -1, // Humain gagne
                        'O': 1,  // IA gagne
                        'tie': 0 // Match nul
                    };
                    
                    // V√©rifier si quelqu'un a gagn√©
                    if (checkWinForPlayer(board, 'X')) return scores['X'];
                    if (checkWinForPlayer(board, 'O')) return scores['O'];
                    if (!board.includes('')) return scores['tie'];
                    
                    if (isMaximizing) {
                        let bestScore = -Infinity;
                        for (let i = 0; i < 9; i++) {
                            if (board[i] === '') {
                                board[i] = 'O';
                                let score = minimax(board, depth + 1, false);
                                board[i] = '';
                                bestScore = Math.max(score, bestScore);
                            }
                        }
                        return bestScore;
                    } else {
                        let bestScore = Infinity;
                        for (let i = 0; i < 9; i++) {
                            if (board[i] === '') {
                                board[i] = 'X';
                                let score = minimax(board, depth + 1, true);
                                board[i] = '';
                                bestScore = Math.min(score, bestScore);
                            }
                        }
                        return bestScore;
                    }
                }
                
                function checkWinForPlayer(board, player) {
                    const winPatterns = [
                        [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
                        [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
                        [0, 4, 8], [2, 4, 6]             // diagonals
                    ];
                    
                    return winPatterns.some(pattern => {
                        return pattern.every(index => {
                            return board[index] === player;
                        });
                    });
                }
                
                function resetTicTacToe() {
                    gameBoard = ['', '', '', '', '', '', '', '', ''];
                    gameActive = true;
                    aiTurn = false; // R√©initialiser le tour de l'IA
                    currentPlayer = 'X';
                    
                    cells.forEach(cell => {
                        cell.textContent = '';
                        cell.classList.remove('bg-primary/20', 'text-primary', 'text-secondary');
                    });
                    
                    updateTurnIndicators();
                }
            }
            
            // === 2048 Game Logic ===
            function init2048Game() {
                const gameBoard = document.getElementById('game-2048-board');
                const scoreDisplay = document.getElementById('score-2048');
                const bestScoreDisplay = document.getElementById('best-2048');
                const resetButton = document.getElementById('reset-2048');
                
                let board = [];
                let score = 0;
                let bestScore = 0;
                let size = 4;
                
                // Create the game board
                function createBoard() {
                    gameBoard.innerHTML = '';
                    
                    for (let i = 0; i < size; i++) {
                        for (let j = 0; j < size; j++) {
                            const cell = document.createElement('div');
                            cell.classList.add('cell-container', 'bg-neutral-100', 'dark:bg-neutral-700', 'rounded-lg');
                            cell.setAttribute('data-row', i);
                            cell.setAttribute('data-col', j);
                            gameBoard.appendChild(cell);
                        }
                    }
                }
                
                // Initialize the game
                function initGame() {
                    createBoard();
                    
                    // Initialize board
                    board = Array(size).fill().map(() => Array(size).fill(0));
                    score = 0;
                    updateScore();
                    
                    // Add two initial tiles
                    addRandomTile();
                    addRandomTile();
                    updateBoardView();
                    
                    // Set up event listeners
                    window.addEventListener('keydown', handleKeyPress);
                    setupTouchEvents();
                }
                
                // Add a random tile to the board
                function addRandomTile() {
                    const emptyCells = [];
                    
                    for (let i = 0; i < size; i++) {
                        for (let j = 0; j < size; j++) {
                            if (board[i][j] === 0) {
                                emptyCells.push({ row: i, col: j });
                            }
                        }
                    }
                    
                    if (emptyCells.length > 0) {
                        const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                        const value = Math.random() < 0.9 ? 2 : 4;
                        board[randomCell.row][randomCell.col] = value;
                    }
                }
                
                // Update the visual representation of the board
                function updateBoardView() {
                    for (let i = 0; i < size; i++) {
                        for (let j = 0; j < size; j++) {
                            const cellValue = board[i][j];
                            const cellContainer = document.querySelector(`[data-row="${i}"][data-col="${j}"]`);
                            
                            // Clear the container
                            cellContainer.innerHTML = '';
                            
                            if (cellValue !== 0) {
                                const tile = document.createElement('div');
                                tile.classList.add('cell-2048');
                                tile.textContent = cellValue;
                                
                                // Get color based on value
                                const colors = getTileColors(cellValue);
                                tile.style.backgroundColor = colors.bg;
                                tile.style.color = colors.text;
                                
                                cellContainer.appendChild(tile);
                            }
                        }
                    }
                    
                    // Update cultural fact based on highest tile
                    const highestTile = getHighestTile();
                    updateCulturalFact(highestTile);
                }
                
                // Get tile colors based on value
                function getTileColors(value) {
                    const colorMap = {
                        2: { bg: '#EEE4DA', text: '#776E65' },
                        4: { bg: '#EDE0C8', text: '#776E65' },
                        8: { bg: '#F2B179', text: '#F9F6F2' },
                        16: { bg: '#F59563', text: '#F9F6F2' },
                        32: { bg: '#F67C5F', text: '#F9F6F2' },
                        64: { bg: '#F65E3B', text: '#F9F6F2' },
                        128: { bg: '#EDCF72', text: '#F9F6F2' },
                        256: { bg: '#EDCC61', text: '#F9F6F2' },
                        512: { bg: '#EDC850', text: '#F9F6F2' },
                        1024: { bg: '#EDC53F', text: '#F9F6F2' },
                        2048: { bg: '#EDC22E', text: '#F9F6F2' }
                    };
                    
                    if (colorMap[value]) {
                        return colorMap[value];
                    }
                    
                    return { bg: '#3C3A32', text: '#F9F6F2' };
                }
                
                // Handle key press events
                function handleKeyPress(e) {
                    let moved = false;
                    
                    if (e.key === 'ArrowUp') {
                        moved = moveUp();
                    } else if (e.key === 'ArrowDown') {
                        moved = moveDown();
                    } else if (e.key === 'ArrowLeft') {
                        moved = moveLeft();
                    } else if (e.key === 'ArrowRight') {
                        moved = moveRight();
                    }
                    
                    if (moved) {
                        addRandomTile();
                        updateBoardView();
                        updateScore();
                        
                        if (isGameOver()) {
                            setTimeout(() => {
                                alert('Game Over! Votre score: ' + score);
                            }, 500);
                        }
                    }
                }
                
                // Handle touch events for mobile
                function setupTouchEvents() {
                    let startX, startY, endX, endY;
                    const minDistance = 50; // Minimum distance to detect a swipe
                    
                    gameBoard.addEventListener('touchstart', function(e) {
                        startX = e.touches[0].clientX;
                        startY = e.touches[0].clientY;
                    }, false);
                    
                    gameBoard.addEventListener('touchmove', function(e) {
                        // Prevent scrolling when swiping inside the game
                        e.preventDefault();
                    }, { passive: false });
                    
                    gameBoard.addEventListener('touchend', function(e) {
                        endX = e.changedTouches[0].clientX;
                        endY = e.changedTouches[0].clientY;
                        
                        const deltaX = endX - startX;
                        const deltaY = endY - startY;
                        
                        if (Math.abs(deltaX) >= Math.abs(deltaY) && Math.abs(deltaX) > minDistance) {
                            // Horizontal swipe
                            if (deltaX > 0) {
                                // Right swipe
                                if (moveRight()) {
                                    afterMove();
                                }
                            } else {
                                // Left swipe
                                if (moveLeft()) {
                                    afterMove();
                                }
                            }
                        } else if (Math.abs(deltaY) > minDistance) {
                            // Vertical swipe
                            if (deltaY > 0) {
                                // Down swipe
                                if (moveDown()) {
                                    afterMove();
                                }
                            } else {
                                // Up swipe
                                if (moveUp()) {
                                    afterMove();
                                }
                            }
                        }
                    }, false);
                    
                    function afterMove() {
                        addRandomTile();
                        updateBoardView();
                        updateScore();
                        
                        if (isGameOver()) {
                            setTimeout(() => {
                                alert('Game Over! Votre score: ' + score);
                            }, 500);
                        }
                    }
                }
                
                // Move tiles up
                function moveUp() {
                    let moved = false;
                    
                    for (let j = 0; j < size; j++) {
                        for (let i = 1; i < size; i++) {
                            if (board[i][j] !== 0) {
                                let row = i;
                                while (row > 0 && board[row - 1][j] === 0) {
                                    board[row - 1][j] = board[row][j];
                                    board[row][j] = 0;
                                    row--;
                                    moved = true;
                                }
                                
                                if (row > 0 && board[row - 1][j] === board[row][j]) {
                                    board[row - 1][j] *= 2;
                                    score += board[row - 1][j];
                                    board[row][j] = 0;
                                    moved = true;
                                }
                            }
                        }
                    }
                    
                    return moved;
                }
                
                // Move tiles down
                function moveDown() {
                    let moved = false;
                    
                    for (let j = 0; j < size; j++) {
                        for (let i = size - 2; i >= 0; i--) {
                            if (board[i][j] !== 0) {
                                let row = i;
                                while (row < size - 1 && board[row + 1][j] === 0) {
                                    board[row + 1][j] = board[row][j];
                                    board[row][j] = 0;
                                    row++;
                                    moved = true;
                                }
                                
                                if (row < size - 1 && board[row + 1][j] === board[row][j]) {
                                    board[row + 1][j] *= 2;
                                    score += board[row + 1][j];
                                    board[row][j] = 0;
                                    moved = true;
                                }
                            }
                        }
                    }
                    
                    return moved;
                }
                
                // Move tiles left
                function moveLeft() {
                    let moved = false;
                    
                    for (let i = 0; i < size; i++) {
                        for (let j = 1; j < size; j++) {
                            if (board[i][j] !== 0) {
                                let col = j;
                                while (col > 0 && board[i][col - 1] === 0) {
                                    board[i][col - 1] = board[i][col];
                                    board[i][col] = 0;
                                    col--;
                                    moved = true;
                                }
                                
                                if (col > 0 && board[i][col - 1] === board[i][col]) {
                                    board[i][col - 1] *= 2;
                                    score += board[i][col - 1];
                                    board[i][col] = 0;
                                    moved = true;
                                }
                            }
                        }
                    }
                    
                    return moved;
                }
                
                // Move tiles right
                function moveRight() {
                    let moved = false;
                    
                    for (let i = 0; i < size; i++) {
                        for (let j = size - 2; j >= 0; j--) {
                            if (board[i][j] !== 0) {
                                let col = j;
                                while (col < size - 1 && board[i][col + 1] === 0) {
                                    board[i][col + 1] = board[i][col];
                                    board[i][col] = 0;
                                    col++;
                                    moved = true;
                                }
                                
                                if (col < size - 1 && board[i][col + 1] === board[i][col]) {
                                    board[i][col + 1] *= 2;
                                    score += board[i][col + 1];
                                    board[i][col] = 0;
                                    moved = true;
                                }
                            }
                        }
                    }
                    
                    return moved;
                }
                
                // Update the score display
                function updateScore() {
                    scoreDisplay.textContent = score;
                    
                    if (score > bestScore) {
                        bestScore = score;
                        bestScoreDisplay.textContent = bestScore;
                    }
                }
                
                // Check if the game is over
                function isGameOver() {
                    // Check if there are empty cells
                    for (let i = 0; i < size; i++) {
                        for (let j = 0; j < size; j++) {
                            if (board[i][j] === 0) {
                                return false;
                            }
                        }
                    }
                    
                    // Check if there are possible merges horizontally
                    for (let i = 0; i < size; i++) {
                        for (let j = 0; j < size - 1; j++) {
                            if (board[i][j] === board[i][j + 1]) {
                                return false;
                            }
                        }
                    }
                    
                    // Check if there are possible merges vertically
                    for (let i = 0; i < size - 1; i++) {
                        for (let j = 0; j < size; j++) {
                            if (board[i][j] === board[i + 1][j]) {
                                return false;
                            }
                        }
                    }
                    
                    return true;
                }
                
                // Get the highest tile value on the board
                function getHighestTile() {
                    let highest = 0;
                    
                    for (let i = 0; i < size; i++) {
                        for (let j = 0; j < size; j++) {
                            if (board[i][j] > highest) {
                                highest = board[i][j];
                            }
                        }
                    }
                    
                    return highest;
                }
                
                // Update cultural fact based on highest tile
                function updateCulturalFact(value) {
                    const culturalFactElement = document.getElementById('cultural-fact-2048');
                    
                    const facts = {
                        2: "Le chiffre 2 est consid√©r√© comme chanceux en Chine car il repr√©sente l'harmonie et l'√©quilibre.",
                        4: "En Japonais, le mot pour 4 (shi) sonne comme le mot pour 'mort', il est donc consid√©r√© malchanceux.",
                        8: "Dans la culture hindoue, le chiffre 8 repr√©sente la richesse et la prosp√©rit√©.",
                        16: "Le nombre 16 est important dans la culture maya, qui utilisait un syst√®me num√©rique en base 20.",
                        32: "Les √âgyptiens anciens ont d√©velopp√© un syst√®me de num√©ration qui utilisait des hi√©roglyphes sp√©cifiques pour repr√©senter des puissances de 10.",
                        64: "Le jeu d'√©checs, qui se joue sur un plateau de 64 cases, est originaire d'Inde et date du 6√®me si√®cle.",
                        128: "Le calendrier traditionnel chinois fonctionne sur un cycle de 60 ans, combinant 12 animaux et 5 √©l√©ments.",
                        256: "Le Yi Jing (ou I Ching), ancien texte chinois de divination, utilise un syst√®me de 64 hexagrammes compos√©s de 6 lignes, cr√©ant 2^6 = 64 combinaisons possibles.",
                        512: "Les anciens Babyloniens utilisaient un syst√®me de num√©ration en base 60, qui est toujours utilis√© aujourd'hui pour mesurer le temps et les angles.",
                        1024: "Le syst√®me binaire (base 2) que nous utilisons en informatique a √©t√© formalis√© par Gottfried Wilhelm Leibniz au 17√®me si√®cle, mais √©tait d√©j√† connu en Chine ancienne.",
                        2048: "F√©licitations! 2048 repr√©sente 2^11, et dans plusieurs cultures, le nombre 11 est consid√©r√© comme un nombre ma√Ætre qui symbolise l'illumination spirituelle et la transformation."
                    };
                    
                    if (facts[value]) {
                        culturalFactElement.textContent = facts[value];
                    } else {
                        culturalFactElement.textContent = "Continuez √† fusionner les tuiles pour d√©couvrir plus de faits culturels int√©ressants!";
                    }
                }
                
                // Reset the game
                resetButton.addEventListener('click', initGame);
                
                // Initialize the game on load
                initGame();
            }
            
            // === Quiz Game Logic ===
            function initQuiz() {
                const quizData = [
                    {
                        question: "Quelle est la capitale du Japon?",
                        options: ["Tokyo", "Kyoto", "Osaka", "Hiroshima"],
                        correct: 0,
                        fact: "Tokyo est la capitale du Japon depuis 1868, rempla√ßant l'ancienne capitale Kyoto."
                    },
                    {
                        question: "Quel pays est connu pour avoir invent√© le papier?",
                        options: ["Chine", "√âgypte", "Gr√®ce", "Inde"],
                        correct: 0,
                        fact: "La Chine a invent√© le papier vers 105 apr. J.-C. sous la dynastie Han. La technique s'est ensuite propag√©e vers l'ouest."
                    },
                    {
                        question: "Quelle est la danse traditionnelle de la Nouvelle-Z√©lande?",
                        options: ["Haka", "Hula", "Tango", "Flamenco"],
                        correct: 0,
                        fact: "Le Haka est une danse c√©r√©monielle maorie traditionnelle de Nouvelle-Z√©lande, rendue c√©l√®bre par l'√©quipe de rugby des All Blacks."
                    },
                    {
                        question: "Quel est l'instrument national de l'Irlande?",
                        options: ["La harpe", "Le violon", "La cornemuse", "Le bodhran"],
                        correct: 0,
                        fact: "La harpe est l'instrument national et aussi l'embl√®me officiel de l'Irlande, apparaissant sur les pi√®ces de monnaie irlandaises."
                    },
                    {
                        question: "Dans quelle ville se trouve la Tour Eiffel?",
                        options: ["Paris", "Lyon", "Marseille", "Bordeaux"],
                        correct: 0,
                        fact: "La Tour Eiffel se trouve √† Paris. Elle a √©t√© construite par Gustave Eiffel pour l'Exposition universelle de 1889."
                    },
                    {
                        question: "Quel pays est connu pour le th√© matcha?",
                        options: ["Japon", "Chine", "Inde", "Tha√Ølande"],
                        correct: 0,
                        fact: "Le matcha est une poudre de th√© vert finement moulue, originaire du Japon et utilis√©e dans la c√©r√©monie traditionnelle du th√© japonaise."
                    },
                    {
                        question: "Quelle est la plus grande f√™te mexicaine qui honore les d√©funts?",
                        options: ["D√≠a de los Muertos", "Cinco de Mayo", "La Posada", "Las Fallas"],
                        correct: 0,
                        fact: "Le D√≠a de los Muertos (Jour des Morts) est c√©l√©br√© au Mexique les 1er et 2 novembre pour honorer les d√©funts avec des offrandes et des c√©l√©brations."
                    },
                    {
                        question: "Quel est le plat national de l'Italie?",
                        options: ["Pizza", "Pasta", "Risotto", "Lasagne"],
                        correct: 0,
                        fact: "Bien que la pizza soit souvent consid√©r√©e comme le plat embl√©matique de l'Italie, les p√¢tes sont consid√©r√©es comme le v√©ritable plat national en raison de leur diversit√© r√©gionale."
                    },
                    {
                        question: "Quelle est la langue officielle du Br√©sil?",
                        options: ["Portugais", "Espagnol", "Anglais", "Fran√ßais"],
                        correct: 0,
                        fact: "Le portugais est la langue officielle du Br√©sil, ce qui le distingue de ses voisins sud-am√©ricains qui parlent principalement espagnol."
                    },
                    {
                        question: "Quel animal est consid√©r√© comme sacr√© en Inde?",
                        options: ["Vache", "√âl√©phant", "Singe", "Tigre"],
                        correct: 0,
                        fact: "La vache est consid√©r√©e comme sacr√©e dans l'hindouisme, religion majoritaire en Inde, et sa protection est inscrite dans la constitution indienne."
                    }
                ];
                
                const questionElement = document.getElementById('quiz-question').querySelector('h3');
                const answerButtons = document.querySelectorAll('.quiz-answer');
                const progressBar = document.getElementById('quiz-progress-bar');
                const currentQuestionElement = document.getElementById('current-question');
                const totalQuestionsElement = document.getElementById('total-questions');
                const scoreElement = document.getElementById('quiz-score');
                const feedbackElement = document.getElementById('quiz-feedback');
                const nextButton = document.getElementById('next-question');
                
                let currentQuestion = 0;
                let score = 0;
                let answeredCurrentQuestion = false;
                
                function loadQuestion() {
                    answeredCurrentQuestion = false;
                    
                    // Reset feedback and answer styles
                    feedbackElement.classList.add('hidden');
                    answerButtons.forEach(button => {
                        button.classList.remove('bg-green-100', 'bg-red-100', 'border-green-500', 'border-red-500', 'dark:bg-green-900/20', 'dark:bg-red-900/20', 'dark:border-green-500', 'dark:border-red-500');
                        button.classList.add('border-neutral-300', 'dark:border-neutral-600');
                        button.disabled = false;
                    });
                    
                    // Update progress display
                    currentQuestionElement.textContent = currentQuestion + 1;
                    totalQuestionsElement.textContent = quizData.length;
                    progressBar.style.width = `${((currentQuestion + 1) / quizData.length) * 100}%`;
                    
                    // Load question and answers
                    const quiz = quizData[currentQuestion];
                    questionElement.textContent = quiz.question;
                    
                    answerButtons.forEach((button, index) => {
                        button.textContent = quiz.options[index];
                        button.setAttribute('data-correct', index === quiz.correct);
                    });
                    
                    // Disable next button until answer is selected
                    nextButton.disabled = true;
                    nextButton.classList.add('opacity-50', 'cursor-not-allowed');
                }
                
                function selectAnswer() {
                    if (answeredCurrentQuestion) return;
                    
                    answeredCurrentQuestion = true;
                    const isCorrect = this.getAttribute('data-correct') === 'true';
                    
                    // Highlight correct and incorrect answers
                    answerButtons.forEach(button => {
                        const buttonCorrect = button.getAttribute('data-correct') === 'true';
                        
                        if (buttonCorrect) {
                            button.classList.remove('border-neutral-300', 'dark:border-neutral-600');
                            button.classList.add('bg-green-100', 'border-green-500', 'dark:bg-green-900/20', 'dark:border-green-500');
                        } else if (button === this && !isCorrect) {
                            button.classList.remove('border-neutral-300', 'dark:border-neutral-600');
                            button.classList.add('bg-red-100', 'border-red-500', 'dark:bg-red-900/20', 'dark:border-red-500');
                        }
                        
                        button.disabled = true;
                    });
                    
                    // Update score
                    if (isCorrect) {
                        score += 10;
                        scoreElement.textContent = score;
                    }
                    
                    // Show feedback
                    const quiz = quizData[currentQuestion];
                    feedbackElement.querySelector('h4').textContent = isCorrect ? 'Correct!' : 'Incorrect';
                    feedbackElement.querySelector('p').textContent = quiz.fact;
                    feedbackElement.classList.remove('hidden');
                    
                    // Enable next button
                    nextButton.disabled = false;
                    nextButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }
                
                function nextQuestion() {
                    if (!answeredCurrentQuestion) return;
                    
                    currentQuestion++;
                    
                    if (currentQuestion < quizData.length) {
                        loadQuestion();
                    } else {
                        // Quiz completed
                        document.getElementById('quiz-question').innerHTML = `
                            <div class="text-center p-4">
                                <h3 class="text-xl font-bold mb-4">Quiz termin√©!</h3>
                                <p class="text-lg mb-3">Votre score: <span class="font-bold">${score}/${quizData.length * 10}</span></p>
                                <div class="my-6 text-5xl">üéâ</div>
                                <button id="restart-quiz" class="px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors">
                                    Recommencer le quiz
                                </button>
                            </div>
                        `;
                        
                        document.getElementById('restart-quiz').addEventListener('click', () => {
                            currentQuestion = 0;
                            score = 0;
                            scoreElement.textContent = score;
                            loadQuestion();
                        });
                        
                        // Hide actions
                        document.querySelector('.game-actions').style.display = 'none';
                        document.querySelector('.quiz-progress').style.display = 'none';
                        feedbackElement.classList.add('hidden');
                    }
                }
                
                // Add event listeners
                answerButtons.forEach(button => {
                    button.addEventListener('click', selectAnswer);
                });
                
                nextButton.addEventListener('click', nextQuestion);
                
                // Initialize quiz
                loadQuestion();
            }
            
            // Prevent page scrolling when swiping in the 2048 game
            document.getElementById('game-2048-board').addEventListener('touchmove', function(e) {
                e.preventDefault();
            }, { passive: false });
        });
    </script>

    <!-- Service Worker Script Content - Will be extracted and used as sw.js -->
    <script id="service-worker-content" type="text/template">
        // Service Worker for Culture Play PWA
        const CACHE_NAME = 'culture-play-v1';
        const urlsToCache = [
            '/',
            '/index.html',
            '/sw.js'
        ];

        // Install event - Cache the essential resources
        self.addEventListener('install', event => {
            event.waitUntil(
                caches.open(CACHE_NAME)
                    .then(cache => {
                        console.log('Opened cache');
                        return cache.addAll(urlsToCache);
                    })
            );
        });

        // Activate event - Clean up old caches
        self.addEventListener('activate', event => {
            const cacheWhitelist = [CACHE_NAME];
            event.waitUntil(
                caches.keys().then(cacheNames => {
                    return Promise.all(
                        cacheNames.map(cacheName => {
                            if (cacheWhitelist.indexOf(cacheName) === -1) {
                                return caches.delete(cacheName);
                            }
                        })
                    );
                })
            );
        });

        // Fetch event - Serve from cache, fallback to network
        self.addEventListener('fetch', event => {
            event.respondWith(
                caches.match(event.request)
                    .then(response => {
                        // Cache hit - return response
                        if (response) {
                            return response;
                        }
                        
                        // Clone the request
                        const fetchRequest = event.request.clone();
                        
                        return fetch(fetchRequest).then(
                            response => {
                                // Check if valid response
                                if (!response || response.status !== 200 || response.type !== 'basic') {
                                    return response;
                                }
                                
                                // Clone the response
                                const responseToCache = response.clone();
                                
                                caches.open(CACHE_NAME)
                                    .then(cache => {
                                        cache.put(event.request, responseToCache);
                                    });
                                    
                                return response;
                            }
                        );
                    })
            );
        });
    </script>

    <!-- Extract Service Worker content and create Blob URL for registration -->
    <script>
        // Create a Blob with the Service Worker code and create a URL for it
        if ('serviceWorker' in navigator) {
            const swContent = document.getElementById('service-worker-content').textContent;
            const swBlob = new Blob([swContent], {type: 'text/javascript'});
            const swUrl = URL.createObjectURL(swBlob);
            
            // Override the Service Worker registration to use our Blob URL
            window.addEventListener('load', function() {
                navigator.serviceWorker.register(swUrl)
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
